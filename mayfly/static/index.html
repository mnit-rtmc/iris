<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Mayfly - IRIS Traffic Data</title>
    <link rel="stylesheet" href="mayfly.css">
</head>

<body>
<h2>Mayfly - Traffic Data Archive</h2>
<p>
    This site is for the distribution of traffic data collected by the IRIS
    traffic management system.
</p>
<p>
    All response bodies are JSON arrays.
</p>

<h3>API endpoints</h3>

<details>
  <summary class="uri">/mayfly/districts</summary>
  <dl>
    <dt>Response</dt>
    <dd>List of all districts in the archive</dd>
  </dl>
</details>

<details>
  <summary class="uri">/mayfly/years</summary>
  <dl>
    <dt>Query Parameters</dt>
    <dd>district (default tms)</dd>
    <dt>Response</dt>
    <dd>List of years containing traffic data</dd>
    <dt>Example URI</dt>
    <dd class="uri">/mayfly/years?district=d3</dd>
  </dl>
</details>

<details>
  <summary class="uri">/mayfly/dates</summary>
  <dl>
    <dt>Query Parameters</dt>
    <dd>district (default tms)</dd>
    <dd>year (4 digits)</dd>
    <dt>Response</dt>
    <dd>List of dates with traffic data in a year</dd>
    <dt>Example URI</dt>
    <dd class="uri">/mayfly/dates?year=2021</dd>
  </dl>
</details>

<details>
  <summary class="uri">/mayfly/corridors</summary>
  <dl>
    <dt>Query Parameters</dt>
    <dd>district (default tms)</dd>
    <dd>date (8 digits; yyyyMMdd)</dd>
    <dt>Response</dt>
    <dd>List of corridors configured on a given date</dd>
    <dt>Example URI</dt>
    <dd class="uri">/mayfly/corridors?date=20210109</dd>
  </dl>
</details>

<details>
  <summary class="uri">/mayfly/detectors</summary>
  <dl>
    <dt>Query Parameters</dt>
    <dd>district (default tms)</dd>
    <dd>date (8 digits; yyyyMMdd)</dd>
    <dt>Response</dt>
    <dd>List of detectors with traffic data on a given date</dd>
    <dt>Example URI</dt>
    <dd class="uri">/mayfly/detectors?date=20210314</dd>
  </dl>
</details>

<details>
  <summary class="uri">/mayfly/counts</summary>
  <dl>
    <dt>Query Parameters</dt>
    <dd>district (default tms)</dd>
    <dd>date (8 digits; yyyyMMdd)</dd>
    <dd>detector (identifier)</dd>
    <dt>Response</dt>
    <dd>Vehicle count data for one detector on a given date</dd>
    <dt>Example URI</dt>
    <dd class="uri">/mayfly/counts?date=20210225&amp;detector=363</dd>
  </dl>
</details>

<details>
  <summary class="uri">/mayfly/headway</summary>
  <dl>
    <dt>Query Parameters</dt>
    <dd>district (default tms)</dd>
    <dd>date (8 digits; yyyyMMdd)</dd>
    <dd>detector (identifier)</dd>
    <dt>Response</dt>
    <dd>Headway data (ms) for one detector on a given date</dd>
    <dt>Example URI</dt>
    <dd class="uri">/mayfly/headway?date=20210225&amp;detector=363</dd>
  </dl>
</details>

<details>
  <summary class="uri">/mayfly/occupancy</summary>
  <dl>
    <dt>Query Parameters</dt>
    <dd>district (default tms)</dd>
    <dd>date (8 digits; yyyyMMdd)</dd>
    <dd>detector (identifier)</dd>
    <dt>Response</dt>
    <dd>Occupancy data (%) for one detector on a given date</dd>
    <dt>Example URI</dt>
    <dd class="uri">/mayfly/occupancy?date=20210225&amp;detector=363</dd>
  </dl>
</details>

<details>
  <summary class="uri">/mayfly/length</summary>
  <dl>
    <dt>Query Parameters</dt>
    <dd>district (default tms)</dd>
    <dd>date (8 digits; yyyyMMdd)</dd>
    <dd>detector (identifier)</dd>
    <dt>Response</dt>
    <dd>Vehicle length data (ft) for one detector on a given date</dd>
    <dt>Example URI</dt>
    <dd class="uri">/mayfly/length?date=20210225&amp;detector=363</dd>
  </dl>
</details>

<details>
  <summary class="uri">/mayfly/speed</summary>
  <dl>
    <dt>Query Parameters</dt>
    <dd>district (default tms)</dd>
    <dd>date (8 digits; yyyyMMdd)</dd>
    <dd>detector (identifier)</dd>
    <dt>Response</dt>
    <dd>Measured speed data (mph) for one detector on a given date</dd>
    <dt>Example URI</dt>
    <dd class="uri">/mayfly/speed?date=20210225&amp;detector=363</dd>
  </dl>
</details>

<details>
  <summary class="uri">/mayfly/espeed</summary>
  <dl>
    <dt>Query Parameters</dt>
    <dd>district (default tms)</dd>
    <dd>date (8 digits; yyyyMMdd)</dd>
    <dd>detector (identifier)</dd>
    <dt>Response</dt>
    <dd>Estimated speed data (mph) for one detector on a given date</dd>
    <dt>Example URI</dt>
    <dd class="uri">/mayfly/espeed?date=20210225&amp;detector=363</dd>
  </dl>
</details>

<h3>Filtering</h3>

<p>
  These queries can be filtered by vehicle length, headway or speed,
  by adding additional query parameters:
</p>
<ul>
  <li class="uri">/mayfly/counts</li>
  <li class="uri">/mayfly/headway</li>
  <li class="uri">/mayfly/occupancy</li>
  <li class="uri">/mayfly/length</li>
  <li class="uri">/mayfly/speed</li>
</ul>
<p>
  These can be used, for example, for vehicle classification.
  Adding <span class="uri">length_ft_min=7&amp;length_ft_max=19</span> to
  a query will return data only for vehicles in that length range.
</p>

<dl>
  <dt>Query Params</dt>
  <dd>length_ft_min (Minimum vehicle length)</dd>
  <dd>length_ft_max (Maximum vehicle length; non-inclusive)</dd>
  <dd>headway_sec_min (Minimum headway)</dd>
  <dd>headway_sec_max (Maximum headway; non-inclusive)</dd>
  <dd>speed_mph_min (Minimum measured speed)</dd>
  <dd>speed_mph_max (Maximum measured speed; non-inclusive)</dd>
</dl>

</body>
</html>
