<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" name="Author" content="Douglas Lau"/>
	<link href="iris_doc.css" rel="stylesheet" type="text/css"/>
	<title>IRIS Administrator Guide</title>
	<script type="text/javascript" src="admin_guide.js"></script>
</head>

<body>
<nav class="sidebar">
  <h1><a id="contents_link" href="#admin_guide">Contents</a></h1>
  <div id="contents_div"><!-- div required for js, DO NOT REMOVE --></div>
  <h2><a id="overview_link" href="#overview">Overview</a></h2>
  <div id="overview_div">
    <h3><a href="#architecture">System Architecture</a></h3>
    <h3><a href="#device_types">Device Types</a></h3>
    <h3><a href="#protocols">Protocols</a></h3>
    <h3><a href="#advanced_features">Advanced Features</a></h3>
  </div>
  <h2><a id="installation_link" href="#installation">Installation</a></h2>
  <div id="installation_div">
    <h3><a href="#operating_system">Operating System</a></h3>
    <h3><a href="#install_iris">Install IRIS</a></h3>
    <h3><a href="#init_iris">Initialize IRIS</a></h3>
    <h3><a href="#server_properties">Server Properties</a></h3>
    <h3><a href="#start_services">Start Services</a></h3>
    <h3><a href="#initial_login">Initial Login</a></h3>
  </div>
  <h2><a id="basic_setup_link" href="#basic_setup">Basic Setup</a></h2>
  <div id="basic_setup_div">
    <h3><a href="#client_properties">Client Properties</a></h3>
    <h3><a href="#user_properties">User Properties</a></h3>
    <h3><a href="#edit_mode">Edit Mode</a></h3>
    <h3><a href="#sys_attr">System Attributes</a></h3>
    <h3><a href="#users_and_roles">Users and Roles</a></h3>
    <h3><a href="#mapping">Mapping</a></h3>
    <h3><a href="#road_topology">Road Topology</a></h3>
    <h3><a href="#comm_links">Comm Links</a></h3>
    <h3><a href="#controllers">Controllers</a></h3>
    <h3><a href="#fonts">Fonts</a></h3>
  </div>
  <h2><a id="devices_link" href="#devices">Devices</a></h2>
  <div id="devices_div">
    <h3><a href="#dms">Dynamic Message Signs</a></h3>
    <h3><a href="#lcs">Lane-Use Control Signs</a></h3>
    <h3><a href="#vds">Vehicle Detection</a></h3>
    <h3><a href="#cameras">Cameras</a></h3>
    <h3><a href="#video">Video Monitors</a></h3>
    <h3><a href="#ramp_meters">Ramp Meters</a></h3>
    <h3><a href="#gate_arms">Gate Arms</a></h3>
    <h3><a href="#tag_readers">Tag Readers</a></h3>
    <h3><a href="#beacons">Beacons</a></h3>
    <h3><a href="#alarms">Alarms</a></h3>
    <h3><a href="#rwis">Road Weather Information Systems</a></h3>
    <h3><a href="#gps">GPS</a></h3>
  </div>
  <h2><a id="features_link" href="#features">Features</a></h2>
  <div id="features_div">
    <h3><a href="#traffic_layer">Traffic Map Layer</a></h3>
    <h3><a href="#incident">Incident Management</a></h3>
    <h3><a href="#plan_schedule">Plans and Schedules</a></h3>
    <h3><a href="#metering_strategies">Ramp Metering Strategies</a></h3>
    <h3><a href="#travel_time">Travel Time Estimation</a></h3>
    <h3><a href="slow_warning.html">Slow Traffic Warning</a></h3>
    <h3><a href="tolling.html">Tolling</a></h3>
    <h3><a href="parking_areas.html">Parking Area Availability</a></h3>
    <h3><a href="vsa.html">Variable Speed Advisory</a></h3>
  </div>
  <h2><a id="troubleshooting_link" href="troubleshooting.html">Troubleshooting</a></h2>
  <h2><a id="maintenance_link" href="maintenance.html">Maintenance</a></h2>
  <h2><a id="development_link" href="development.html">Development</a></h2>
  <h2><a id="stepbystep_link" href="step_by_step.html">Step-by-Step</a></h2>
</nav>

<main class="mainbar">
<header>
<div id="stamp">28 Aug 2019</div>
</header>
<h1 id="admin_guide"><span class="left"><img src="iris_icon.svg"/></span>
	IRIS Administrator Guide</h1>

<h2 id="overview">Overview</h2>
<p>
	IRIS is an <a href="http://www.opensource.org/docs/osd">open source</a>
	advanced traffic management system.
	It provides an integrated platform for transportation agencies to
	manage traffic monitoring and control devices.
	The software is written in <a href="http://www.java.com">Java</a> and
	licensed for anyone to use under the
	<a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.html">GPL</a>.
	In addition, all dependencies required to install and operate an IRIS
	system are available as free software.
	IRIS stands for Intelligent Roadway Information System.
</p>
<p>
	The IRIS software presents an intuitive map-based interface to system
	operators.
	This user interface has been refined over many iterations by getting
	feedback from operators to streamline their workflow.
</p>

<h3 id="architecture">System Architecture</h3>

<figure>
<svg class="right" xmlns="http://www.w3.org/2000/svg" version="1.1"
     width="640" height="480">
  <title>System Architecture</title>
  <defs>
    <marker id="Arrow1Mend" orient="auto" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
            transform="matrix(-0.4,0,0,-0.4,-4,0)"
            style="stroke:#000;stroke-width:1pt;marker-start:none"/>
    </marker>
  </defs>
  <g style="font-size:20px;font-family:Liberation Sans">
    <text style="font-size:28px">
      <tspan x="384" y="64">IRIS System</tspan>
      <tspan x="384" y="94">Architecture</tspan>
    </text>
    <g transform="translate(112,24)">
      <g style="fill:#c4f9ff;stroke:#000;stroke-width:2">
        <g style="opacity:0.5">
          <rect x="16" y="16" width="200" height="88" ry="8"
                style="opacity:0.5"/>
          <rect x="8" y="8" width="200" height="88" ry="8"/>
        </g>
        <rect x="0" y="0" width="200" height="88" ry="8"/>
      </g>
      <text>
        <tspan x="48" y="48">IRIS Clients</tspan>
      </text>
    </g>
    <g transform="translate(16,176)">
      <rect x="0" y="0" width="176" height="104" ry="8"
        style="fill:#ffe6c4;stroke:#000;stroke-width:2"/>
      <text>
        <tspan x="16" y="40">Apache Server</tspan>
        <tspan x="24" y="60">- Client JARs</tspan>
        <tspan x="24" y="80">- Map Tiles</tspan>
      </text>
    </g>
    <g transform="translate(232,176)">
      <rect x="0" y="0" width="192" height="120" ry="8"
            style="fill:#e2c4ff;stroke:#000;stroke-width:2"/>
      <text>
        <tspan x="40" y="60">IRIS Server</tspan>
      </text>
    </g>
    <g transform="translate(464,188)">
      <rect x="0" y="0" width="160" height="108" ry="8"
        style="fill:#d0ffc4;stroke:#000;stroke-width:2"/>
      <text style="font-size:18px">
        <tspan x="16" y="40">Authentication</tspan>
        <tspan x="16" y="60">Server (LDAP)</tspan>
        <tspan x="32" y="80" style="font-style:italic">(Optional)</tspan>
      </text>
    </g>
    <g transform="translate(16,340)">
      <rect x="0" y="0" width="144" height="88" ry="8"
        style="fill:#f6ffc4;stroke:#000;stroke-width:2" />
      <text>
        <tspan x="16" y="40">Honeybee</tspan>
        <tspan x="24" y="60">- JSON files</tspan>
      </text>
    </g>
    <g transform="translate(200,360)">
      <rect x="0" y="0" width="152" height="88" ry="8"
        style="fill:#c4d1ff;stroke:#000;stroke-width:2" />
      <text>
        <tspan x="16" y="40">Database</tspan>
        <tspan x="16" y="60">(PostgreSQL)</tspan>
      </text>
    </g>
    <g transform="translate(392,360)">
      <g style="fill:#f6ffc4;stroke:#000;stroke-width:2">
        <g style="opacity:0.5">
          <rect x="16" y="16" width="208" height="88" ry="8"
                style="opacity:0.5"/>
          <rect x="8" y="8" width="208" height="88" ry="8"/>
        </g>
        <rect x="0" y="0" width="208" height="88" ry="8"/>
      </g>
      <text style="font-size:18px">
        <tspan x="16" y="40">Traffic Monitoring</tspan>
        <tspan x="16" y="60">and Control Devices</tspan>
      </text>
    </g>
    <g style="stroke:#000;stroke-width:2;marker-end:url(#Arrow1Mend)">
      <path d="m 176,112 -32,64"/>
      <path d="m 256,112 32,64"/>
      <path d="m 424,240 40,8"/>
      <path d="m 160,374 40,16"/>
      <path d="m 300,296 -32,64"/>
      <path d="m 392,296 32,64"/>
    </g>
  </g>
</svg>
</figure>

<p>
	The software has a client/server architecture.
	System configuration data is stored in a
	<a href="http://www.postgresql.org">PostgreSQL</a> database,
	and managed by the IRIS server.
	The server also handles communication with all traffic control and
	data collection devices.
	The client software is distributed by an <a
	href="http://projects.apache.org/projects/http_server.html">Apache</a>
	web server, using Java Web Start.
	All communication between the server and clients is encrypted using
	secure socket layer (SSL).
	The server may be configured to pass authentication requests off to an
	external LDAP server, allowing IRIS to integrate into an existing
	authentication system.
</p>

<h3 id="device_types">Device Types</h3>
<p>
	IRIS is able to manage several different types of traffic monitoring and
	control devices.
	These include:
</p>
<ul>
	<li><a href="#dms">DMS</a> (dynamic message signs)</li>
	<li><a href="#cameras">CCTV cameras</a> and
	    <a href="#video">Video monitors</a>
	</li>
	<li><a href="#vds">VDS</a> (vehicle detection systems)</li>
	<li><a href="#lcs">LCS</a> (lane-use control signs)</li>
	<li><a href="#ramp_meters">Ramp meters</a></li>
	<li><a href="#gate_arms">Gate Arms</a></li>
	<li><a href="#tag_readers">Tag Readers</a></li>
	<li><a href="#beacons">Beacons</a></li>
	<li><a href="#rwis">RWIS</a> (road-weather information systems)</li>
	<li><a href="#gps">GPS</a> (global positioning system)</li>
	<li><a href="#alarms">Alarms</a></li>
</ul>
<h3 id="protocols">Protocols</h3>
<p>
	Many different protocols are supported for communicating with
	various device types.
	Additional protocols can be added for any existing device type by
	programming a simple driver interface.
	These are some existing protocols:
</p>
<ul>
	<li><a href="#ntcip">NTCIP</a></li>
	<li><a href="#dms_xml">DMS-XML</a></li>
	<li><a href="#mndot170">MnDOT-170</a></li>
	<li><a href="#ss105">Wavetronix SmartSensor SS105</a></li>
	<li><a href="#ss125">Wavetronix SmartSensor HD SS125</a></li>
	<li><a href="#g4">RTMS G4</a></li>
	<li><a href="#canoga">GTT Canoga Traffic Sensing System</a></li>
	<li><a href="#dr500">Houston Radar DR-500 Doppler</a></li>
	<li><a href="#dxm">Banner Engineering DXM Magnetometer</a></li>
	<li><a href="#axis_ptz">Axis Camera PTZ</a></li>
	<li><a href="#pelcod">Pelco-D PTZ</a></li>
	<li><a href="#manchester">American Dynamics Manchester PTZ</a></li>
	<li><a href="#vicon">Vicon Camera PTZ</a></li>
	<li><a href="#cohu">Cohu Camera PTZ</a></li>
	<li><a href="#infinova">Infinova Camera PTZ</a></li>
	<li><a href="#pelcop">Pelco-P Keyboard</a></li>
	<li><a href="#monstream">MonStream</a></li>
	<li><a href="#stc">HySecurity SmartTouch Controller STC</a></li>
	<li><a href="#e6">Transcore Encompass 6 E6</a></li>
	<li><a href="#redlion">RedLion modem GPS</a></li>
	<li><a href="#sierragx">SierraGX modem GPS</a></li>
	<li><a href="#dinrelay">Digital Loggers Inc. DIN-Relay</a></li>
	<li><a href="#cbw">Xytronix Control By Web CBW</a></li>
	<li><a href="#org815">Optical Scientific ORG-815</a></li>
	<li><a href="#ssi">SSI ScanWeb</a></li>
	<li><a href="#msgfeed">DMS Message Feed</a></li>
	<li><a href="#incfeed">Incident Feed</a></li>
</ul>
<h3 id="advanced_features">Advanced Features</h3>
<p>
	IRIS contains these higher-level traffic management features:
</p>
<ul>
	<li>Continuously updated <a href="#traffic_layer">traffic map</a></li>
	<li><a href="#incident">Incident management</a></li>
	<li><a href="#plan_schedule">Scheduled</a> deployment of control devices
	</li>
	<li>Coördinated <a href="#metering_strategies">ramp metering strategies
	    </a></li>
	<li><a href="#travel_time">Travel time</a> estimation</li>
	<li><a href="slow_warning.html">Slow traffic warning</a></li>
	<li><a href="tolling.html">Toll</a> lane operation</li>
	<li><a href="parking_areas.html">Parking area</a> availability</li>
</ul>

<h2 id="installation">Installation</h2>
<p/>

<h3 id="operating_system">Operating System</h3>
<p>
	Install <a href="http://fedoraproject.org">Fedora</a> onto the server
	computer.
	Other operating systems, such as Red Hat Enterprise Linux, can also be
	used, but the procedures may vary slightly.
	This machine should have a minimum of 2 GB of RAM and 200 GB hard drive
	storage space.
	The IRIS server does not have a GUI interface, so this computer can be
	set up headless.
</p>
<p>
	After the operating system is installed, make sure the hostname is
	configured correctly in DNS.
	The hostname is needed for some configuration files in the following
	steps.
	The following command should display the hostname that can be used to
	access the server:
</p>
<pre class="code">hostname -f</pre>

<h3 id="install_iris">Install IRIS</h3>
<p>
	<a href="http://iris.dot.state.mn.us/rpms/">Download</a> and install
	the IRIS package.
	This should be a file called
	<b>iris-<i>{major}</i>.<i>{minor}</i>.<i>{micro}</i>-<i>{build}</i>.<i>{arch}</i>.rpm</b>.
	The <i>{major}</i>, <i>{minor}</i>, and <i>{micro}</i> version numbers
	and the <i>{build}</i> number can change with each release.
	The system architecture, <i>{arch}</i>, will be <i>noarch</i>,
	since Java is architecture independent.
	It can be installed with the following command (as root):
</p>
<pre class="code">dnf install iris-<i>{major}</i>.<i>{minor}</i>.<i>{micro}</i>-<i>{build}</i>.noarch.rpm</pre>
<p>
	This will install dependencies not already installed, including
	<a href="http://openjdk.java.net">OpenJDK</a>,
	<a href="http://www.postgresql.org">PostgreSQL</a> and
	<a href="http://projects.apache.org/projects/http_server.html">Apache</a>.
</p>
<h3 id="init_iris">Initialize IRIS</h3>
<p>
	Next, you must initialize the IRIS server installation.
	Run the following command (as root):
</p>
<pre class="code">iris_ctl init</pre>
<p>
	This command will perform the following steps:
</p>
<ol>
	<li>
		Update the <code>/etc/iris/iris-client.properties</code> file
		with the server's hostname.
	</li>
	<li>
		Create an SSL key pair for encrypted communication between the
		server and clients.
		The keystore files are
		<code>/etc/iris/iris-server.keystore</code> and
		<code>/etc/iris/iris-client.keystore</code>.
		The keystore passwords are put into
		<code>/etc/iris/iris-server.properties</code> and
		<code>/etc/iris/iris-client.properties</code>.
	</li>
	<li>
		Create a symbolic link to the PostgreSQL JDBC driver to make it
		available to the IRIS server.
	</li>
	<li>
		Create the database cluster and start the PostgreSQL server.
	</li>
	<li>
		Create the <code>osm</code> databsae (for OpenStreetMap data).
	</li>
	<li>
		Create the <code>tms</code> PostgreSQL user, which IRIS uses to
		connect to the database.
	</li>
	<li>
		Create the <code>tms</code> database and populate it using a
		template SQL script.
	</li>
	<li>
		Configure the apache (httpd) and IRIS services to start
		automatically.
	</li>
	<li>
		Create symbolic links to the current IRIS software version.
	</li>
</ol>
<p>
	The command should finish with the following message:
</p>
<pre>Successfully initialized the IRIS server</pre>

<h3 id="server_properties">Server Properties</h3>
<p>
	The IRIS server has a configuration file which controls some of its
	basic settings &mdash; <i>/etc/iris/iris-server.properties</i>.
	Most of the default settings should work, but it may be necessary to
	make some changes.
	The file can be modified using a text editor, such as <i>gedit</i> or
	<i>vi</i>.
</p>
<h4>Internationalization</h4>
<p>
	There are three properties which control internationalization (i18n).
	They are <i>language</i>, <i>country</i> and <i>variant</i>.
	These should only be changed if the IRIS software has been localized
	for a specific locale.
</p>
<h4 id="district">District</h4>
<p>
	This property allows multiple IRIS servers to exist within the same
	organization.
	The default value is <code>tms</code>.
</p>
<h4>HTTP Proxy</h4>
<p>
	These properties can be used when IRIS must connect to HTTP servers
	using a proxy server, due to organization firewall policies.
</p>
<h4>Database Connection</h4>
<p>
	The <i>db.url</i>, <i>db.user</i> and <i>db.password</i> properties
	control how the IRIS server connects to the PostgreSQL database.
	None of these properties should be changed, since they were configured
	earlier by the <code>iris_ctl</code> script.
</p>
<h4 id="sonar_config">SONAR Configuration</h4>
<p>
	The <i>sonar.ldap.urls</i> property can be used to let IRIS pass user
	authentication requests to one or more LDAP servers.
	Multiple URLs must be separated by a space.
	IRIS can manage user accounts and passwords without an LDAP server, but
	this feature allows operators to log into IRIS without requiring them to
	remember an additional user name and password.
	If your organization already has an LDAP server, such as Active
	Directory, you should use that.
</p>
<p>
	The URL protocol is normally <i>ldap:</i>, but must be <i>ldaps:</i>
	for encrypted communication over SSL.
	To use ldaps, you must first import the SSL certificate into the IRIS
	keystore.
	Once you have obtained the SSL certificate for the LDAP server, save it
	as <i>ldap.cert</i>.
	Now you can import it with the following command (as root):
</p>
<pre class="code">keytool -import -alias ldap-cert -keystore /etc/iris/iris-server.keystore -file ldap.cert</pre>
<p>
	The <i>keystore.password</i> is used for accessing keys in
	<code>/etc/iris/iris-server.keystore</code>.
	This password is automatically generated by the <code>iris_ctl</code>
	script.
	It will not need to be changed.
</p>

<h3 id="start_services">Start Services</h3>
<p>
	Finally, the IRIS server can now be started with the following command:
</p>
<pre class="code">systemctl start iris</pre>
<p>
	Check that everything started OK:
</p>
<pre class="code">tail /var/log/iris/iris.stderr
systemctl status iris</pre>
<p>
	This should indicate that IRIS is active and running.
</p>

<h3 id="initial_login">Initial Login</h3>
<p>
	From a client computer with Java installed, point your web browser at
	http://YOUR_SERVER_NAME/iris-client/.
	From there, you should be able to launch the IRIS client Web Start
	application and log in.
</p>
<p>
	Enter <code>admin</code> as the username and <code>atms_242</code> as
	the password for the initial login.
	After <a href="#users_and_roles">creating</a> and logging in with a
	real administrator account, the <code>admin</code> user account should
	be disabled.
</p>

<h2 id="basic_setup">Basic Setup</h2>
<br/>

<h3 id="client_properties">Client Properties</h3>
<p>
	The IRIS server has a configuration file which contains default
	properties for clients &mdash; <i>/etc/iris/iris-client.properties</i>.
	These properties include internationalization, network proxy, and other
	system configuration.
	Note that even though IRIS has been internationalized, it has not yet
	been translated to languages other than english.
</p>
<dl>
	<dt>language</dt>
	<dd>
		ISO 639 alpha-2 or alpha-3 language code.
		E.g., "en", "es", "fr".
	</dd>
	<dt>country</dt>
	<dd>
		ISO 3166 alpha-2 country code or UN M.49 numeric-3 area code.
		E.g., "US", "MX", "CA".
	</dd>
	<dt>variant</dt>
	<dd>
		IETF BCP 47 language variant subtag.
	</dd>
	<dt>district</dt>
	<dd>
		District name.
		Useful in cases where multiple IRIS servers exist within the
		same organization.
	</dd>
	<dt>http.proxy</dt>
	<dd>
		List of HTTP proxy settings (used for downloading map tiles,
		XML files, etc.)
	</dd>
	<dt>http.proxy.whitelist</dt>
	<dd>
		A list of addresses to bypass using proxy server.
		Addresses are in CIDR notation (exact IP, or ranges specified
		such as 192.168.1.0/24).
	</dd>
	<dt>keystore.file</dt>
	<dd>
		URL for the client keystore file.
	</dd>
	<dt>keystore.password</dt>
	<dd>
		Password for the client keystore.
	</dd>
	<dt>sonar.host</dt>
	<dd>
		IP or hostname of the SONAR server.
	</dd>
	<dt>sonar.port</dt>
	<dd>
		TCP port number of the SONAR server.
	</dd>
	<dt>tdxml.detector.url</dt>
	<dd>
		URL for XML detector stream.
	</dd>
	<dt>map.tile.url</dt>
	<dd>
		Base URL for map tileset.
		Must end in "/".
	</dd>
	<dt>video.host</dt>
	<dd>
		IP or hostname of video server/proxy.
	</dd>
	<dt>video.port</dt>
	<dd>
		TCP port number of video server/proxy.
	</dd>
	<dt>video.extviewer</dt>
	<dd>
		External video viewer.
	</dd>
	<dt>autologin.username</dt>
	<dd>
		A username to be used for automatic login upon client startup.
		Note: use of this property is a security risk.
	</dd>
	<dt>autologin.password</dt>
	<dd>
		A password to be used for automatic login upon client startup.
		Note: use of this property is a security risk.
	</dd>
	<dt>tab.list</dt>
	<dd>
		A list specifying the visibility and ordering of the primary UI
		tabs in the IRIS client.
		The default value is:
		<code>incident, dms, camera, lcs, ramp.meter, gate.arm, r_node,
		      action.plan, comm</code>
	</dd>
	<dt>scale</dt>
	<dd>
		User interface scaling factor (0.25 to 4.0).
		Useful for Hi-DPI screens.
	</dd>
</dl>

<h3 id="user_properties">User Properties</h3>
<p>
	The IRIS client also reads a property file on client computers.
	The file is named "user.properties", and can be found in the "iris"
	folder of the user's home directory.
	It can contain overrides for any of the default values in the
	<a href="#client_properties">client properties</a> file.
	The file is overwritten when logging out.
	The window geometry and last selected tab will be updated,
	but all other properties will be left unchanged.
</p>

<h3 id="edit_mode">Edit Mode</h3>
<p>
	There is an <b>edit mode</b> toggle button on the lower-right corner of
	the IRIS client.
	When the edit mode is <b>OFF</b>, all configuration changes will be
	disallowed.
	This feature prevents administrators from accidentally modifying the
	system while looking up information.
	It is recommended to only turn the edit mode <b>ON</b> while updating
	the system configuration.
	Note: edit mode does not grant any capabilities which are not already
	associated with the <a href="#users_and_roles">user's role</a>.
</p>

<h3 id="sys_attr">System Attributes</h3>
<aside>
	Select <span class="menu">View ➔ System ➔ System Attributes</span> menu
	item
</aside>
<p>
	A <b>system attribute</b> is a configurable value which can be used to
	customize an IRIS system.
	Each system attribute has a corresponding type: string, boolean,
	integer or floating point number.
	String values are limited to 64 characters or less.
	Boolean values must be specified as either <code>true</code> or
	<code>false</code>.
	Many numeric system attributes are constrained to a range of values
	within a minimum and maximum bound, depending on the attribute.
	A system attribute can be customized by updating the value in the table
	on the System Attributes form.
	When a system attribute has been modified from its default value, it
	will be displayed <b>in bold</b>.
	Most attribute changes take effect immediately, but some require the
	IRIS client or server to be restarted. Some System Attributes are
	described in more detail below.
</p>

<h3 id="users_and_roles">Users and Roles</h3>
<aside>
	Select <span class="menu">View ➔ System ➔ Users and Roles</span>
	menu item
</aside>
<p>
	IRIS contains a set of user accounts which are allowed to access the
	system.
	Each account must be assigned to a specific <a href="#roles">role</a>.
	During login, the user account is checked for validity.
	For a successful login, the user and role must both be enabled.
	If the user has a "distinguished name" (dn), then authentication is
	performed using <a href="#sonar_config">LDAP</a>.
	Otherwise, the supplied password is checked against the stored password
	hash for the account.
</p>
<h4 id="roles">Roles</h4>
<p>
	A role defines the set of <a href="#capabilities">capabilities</a>
	associated with a user account (any other capabilities will not be
	available).
	The default roles are <code>administrator</code> and
	<code>operator</code>.
	The <code>administrator</code> role has <a href="#capabilities">
	capabilities</a> which allow unfettered access to the system.
	Other roles can be created to allow different capability sets for users,
	as needed.
	<b>WARNING: if the administrator role or admin user are disabled,
	the ability to make further changes will be lost immediately.</b>
</p>
<h4 id="capabilities">Capabilities</h4>
<p>
	A capability is a set of <a href="#privileges">privileges</a> which can
	be associated with roles.
	It grants all necessary privileges to perform a specific user task.
	There are typically 3 capabilities for each device type:
	<dl>
	<dt><code>_tab</code></dt>
	<dd>Grant <b>view</b> privileges</dd>
	<dt><code>_control</code></dt>
	<dd>Grant <b>control</b> privileges</dd>
	<dt><code>_admin</code></dt>
	<dd>Grant <b>administration</b> privileges</dd>
	</dl>
	Capabilities can be disabled, preventing all users from having access to
	them.
	For example, if a system does not contain any LCS devices, the
	<code>lcs_tab</code> capability could be disabled, preventing that tab
	from appearing in the user interface for any users.
	<b>WARNING: the <code>base_admin</code> capability can grant access for
	all IRIS functions.</b>
</p>
<h4 id="privileges">Privileges</h4>
<p>
	A privilege grants read or write access to one type of object.
	There are 5 fields required to fully specify a privilege.
	<dl>
	<dt>Type</dt>
	<dd>Object type can be selected from a list of available types.</dd>
	<dt>Object</dt>
	<dd>A regular expression used to match object names.
	    NOTE: Write access only.
	    This feature will be removed in a future version of IRIS.
	</dd>
	<dt>Group</dt>
	<dd>Group names are used to divide objects into related groups.
	    This is an experimental feature intended to replace the
	    <b>object</b> field.
	    NOTE: Write access only.
	    <table>
	    <tr>
	    <th>Type</th>
	    <th>Group</th>
	    <th>Description</th>
	    </tr>
	    <tr>
	    <td>play_list</td>
	    <td>user</td>
	    <td>Personal camera <a href="#playlist">play list</a></td>
	    </table>
	</dd>
	<dt>Attribute</dt>
	<dd>Write access to a specific attribute of an object type can be
	    specified with this field.
	</dd>
	<dt>Write</dt>
	<dd>When this checkbox is checked, write access is granted.
	    Otherwise, the privilege grants read access.
	    To be granted write access, a role must also have read access to
	    the object type.
	</dl>
</p>

<h3 id="mapping">Mapping</h3>
<p>
	The IRIS client can use map tiles to display high-quality maps as a
	background layer.
	The map tiles are fetched from a web server on demand as the client map
	is panned and zoomed.
	The tiles can be generated from <a href="http://openstreetmap.org">
	OpenStreetMap</a> (OSM) data.
	The following instructions describe one method of generating the map
	tiles on Fedora 29.
</p>

<h4>Get OSM data for your region</h4>
<p>
	Download the latest OSM data from
	<a href="http://download.geofabrik.de/">Geofabrik</a>.
	Find the sub-region of interest -- for example, data for Minnesota is at
	<a href="http://download.geofabrik.de/north-america/us/minnesota.html">
	http://download.geofabrik.de/north-america/us/minnesota.html</a>.
	This file is 164 MB as of December 2018.
</p>

<h4>Import OSM Data</h4>
<p>
	The time required to for this process varies depending on the amount of
	data.
	For Minnesota, it takes about 5 minutes on a beefy server.
</p>
<pre class="code">
su --login postgres
time osm2pgsql -v --number-processes=8 -d osm -s --drop --multi-geometry ./minnesota-20181219.osm.pbf
</pre>

<h4>Build and install mapnik library from source</h4>
<p>
	See the mapnik <a href="https://github.com/mapnik/mapnik/wiki/Mapnik-Installation">install docs</a>. The <a href="https://gist.github.com/springmeyer/3427021">Springmeyer docs</a> are also very useful.
</p>
<pre class="code">
dnf install mapnik
</pre>

<h4>Install mapnik tools</h4>
<p>
	See <a href="https://github.com/mapnik/mapnik/blob/v2.2.0/INSTALL.md">docs</a>.
</p>
<pre class="code">
sudo dnf -y install svn
cd ~/osm
svn export http://svn.openstreetmap.org/applications/rendering/mapnik
# Install prepared world boundary data
cd ~/osm/mapnik
mkdir world_boundaries
wget http://tile.openstreetmap.org/world_boundaries-spherical.tgz
tar xvzf world_boundaries-spherical.tgz
wget http://tile.openstreetmap.org/processed_p.tar.bz2
tar xvjf processed_p.tar.bz2 -C world_boundaries
wget http://tile.openstreetmap.org/shoreline_300.tar.bz2
tar xjf shoreline_300.tar.bz2 -C world_boundaries
wget http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_populated_places.zip
unzip ne_10m_populated_places.zip -d world_boundaries
wget http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/110m/cultural/ne_110m_admin_0_boundary_lines_land.zip
unzip ne_110m_admin_0_boundary_lines_land.zip  -d world_boundaries
</pre>

<h4>Patch osm.xml to create iris_osm.xml</h4>
<pre class="code">
cd ~/osm/mapnik/
cp osm.xml iris_osm.xml
# these patches are optional
patch -p0 &lt; ../01_drop_junc_power_layers.patch
patch -p0 &lt; ../02_interstate_shields.patch
patch -p0 &lt; ../03_trunk_shields.patch
patch -p0 &lt; ../04_cty_rd_shields.patch
patch -p0 &lt; ../05_motorway_color.patch
patch -p0 &lt; ../06_trunk_color.patch
patch -p0 &lt; ../07_primary_color.patch
patch -p0 &lt; ../08_secondary_color.patch
patch -p0 &lt; ../09_tertiary_color.patch
</pre>

<h4>Copy symbols used for roadway shields</h4>
<p>
	FIXME
</p>

<h4>Generate tiles</h4>
<p>
	Generating tiles takes about 2 hours on a 16 processor system, or about 13K tiles/min.
</p>
<pre class="code">
su - tms
cd ~/osm/mapnik
export MAPNIK_MAP_FILE=~/osm/mapnik/iris_osm.xml
export MAPNIK_TILE_DIR=/home/tms/osm/tiles
# Customize osm.xml
./generate_xml.py  --dbname osm --accept-none
vim generate_tiles_multiprocess.py
	NUM_THREADS = number of processors in your server
	bbox = (-97.5, 43.0, -89.0, 49.5)
	minZoom = 6
	maxZoom = 16
	# comment all of the european cities listed
time ./generate_tiles_multiprocess.py
# Copy tiles to server hosting them
scp -rp ~/osm/tiles/* root@tilehost:/var/www/html/
</pre>

<h4>Create Map Extents in IRIS database</h4>
<aside>
	Select <span class="menu">View ➔ System ➔ Map Extents</span> menu item
</aside>
<p>
	This form enables the creation of map extents, which are buttons
	allowing quick selection of a map location and zoom level.
	Each map extent will be displayed as a button on the upper right area
	of the map (next to the zoom in/out buttons).
	First, a "Home" extent should be created, which is selected by default
	when a user logs in.
	Other extents can also be created for commonly selected map spots.
</p>

<h3 id="road_topology">Road Topology</h3>
<figure>
<svg class="right" width='240' height='480'
     xmlns="http://www.w3.org/2000/svg" version="1.1"
     xmlns:xlink='http://www.w3.org/1999/xlink'>
  <title>R_Nodes</title>
<defs>
  <g id='r_node_marker' style='fill:lime;stroke:black;stroke-width:2'>
    <circle cx='0' cy='0' r='10'/>
    <path d='M-8-8L8 8'/>
    <path d='M-8 8L8-8'/>
  </g>
</defs>
<path d='M6 0L6 480 120 480 120 406C124 408 128 432 172 480L236 480
	 C196 448 150 368 120 288L120 208C128 168 214 50 236 0L172 0
	 C168 12 120 80 120 88L120 0Z'/>
<path style='fill:none;stroke:white;stroke-dasharray:10,20;stroke-width:4'
      d='M64 8L64 480'/>
<path style='fill:none;stroke:yellow;stroke-width:4'
      d='M16 0L16 480M112 368C118 404 168 468 180 480M180 0
	 C180 8 128 80 112 120'/>
<path style='fill:none;stroke:white;stroke-width:4'
      d='M112 0L112 122M228 0C196 64 145 128 112 200L112 288
	 C144 373 189 448 228 480M112 368L112 480'/>
<use x='112' y='32' xlink:href='#r_node_marker'/>
<use x='112' y='120' xlink:href='#r_node_marker'/>
<use x='112' y='240' xlink:href='#r_node_marker'/>
<use x='112' y='368' xlink:href='#r_node_marker'/>
<use x='112' y='448' xlink:href='#r_node_marker'/>
<text style="font-size:24px">
  <tspan x="128" y="248">R_Nodes</tspan>
</text>
</svg>
</figure>

<p>
	For many of the <a href="#features">features</a> IRIS provides, a model
	of the road network topology is required.
	This model consists of a set of roadway nodes, or <b>r_node</b>s, which
	describe all the points of interest on the road network.
	For instance, each entrance or exit ramp, detector station or
	intersection would be represented by an r_node.
</p>
<p>
	All r_nodes with the same road and direction-of-travel are grouped into
	<b>corridors</b>.
	The r_nodes within a corridor are automatically sorted based on their
	coördinates.
	Corridors are linked to each other by exit and entrance r_nodes.
	For example an exit r_node from Northbound road A to Eastbound road B
	would automatically link to an entrance onto Eastbound road B from
	Northbound road A.
</p>
<h4 id="roads">Road Setup</h4>
<aside>
	Select <span class="menu">View ➔ System ➔ Roads</span> menu item
</aside>
<p>
	Before creating r_nodes, some roads must be created.
	With <a href="#edit_mode">edit mode</a> <b>ON</b>, enter the road name
	into the text box at the bottom of the form and press the <b>Create</b>
	button.
	Road names must be unique, and can be up to 20 characters in length.
	It's a good idea to capitalize each word, and abbreviate any
	designators — for example, "Main St".
</p>
<p>
	When a road is created, it will be added to the Roads table.
	Other road attributes can be changed here.
	The second column is <b>Abbrev</b>, which is an abbreviation of the
	road name (up to 6 characters).
	This is used for labeling <a href="#vds">detectors</a> and
	<a href="#station">stations</a>.
</p>
<p>
	The <b>Road Class</b> determines the presentation of the road on the
	map.
	For example, a road marked "Freeway" would be drawn thicker and more
	prominent than an "Expressway" or "Arterial".
</p>
<p>
	<b>Direction</b> and <b>Alt Dir</b> determine the primary and secondary
	compass directions of the road.
</p>
<h4 id="r_node">R_Node Location</h4>
<p>
	Select the <b>R_Nodes</b> tab on the client interface to create or
	edit r_nodes.
	In the <b>Selected Roadway Corridor</b> frame, there is an <b>Add</b>
	button.
	Press the button to start creating a new r_node.
	The mouse cursor will change to a <b>target</b> while over the map.
	Select the point on the map where the r_node should be located and
	left-click the mouse.
	The new r_node will appear on the map, and in the list for the
	selected corridor.
</p>
<p>
	In the <b>Selected Roadway Corridor</b> frame, there is a
	<b>Corridor</b> widget containing a list of all corridors which
	contain at least one r_node.
	When a corridor is selected, the r_node list will be populated with all
	r_nodes on the corridor.
	Also, any new r_nodes created will be on the selected corridor.
</p>
<p>
	Once an r_node is selected, any fields on the <b>Location</b> tab can
	be edited.
	Changing the roadway or direction will move the r_node to another
	corridor.
	Other attributes are nearest cross-street, cross-street direction,
	and notes.
</p>
<h4>R_Node Setup</h4>
<p>
	The r_node <b>Setup</b> tab contains several more attributes.
</p>
<dl>
  <dt id='r_node_type'>node_type</dt>
  <dd>There are six different r_node types:
    <table>
      <tr>
        <th>Code</th>
        <th>Node Type</th>
        <th>Description</th>
      </tr>
      <tr id="station">
        <td>0</td>
        <td>station</td>
        <td>Mainline detector station or shape node &mdash; can be assigned a
            <a href="#station_id">station ID</a>
        </td>
      </tr>
      <tr>
	<td>1</td>
	<td>entrance</td>
	<td>Entrance ramp onto corridor</td>
      </tr>
      <tr>
	<td>2</td>
	<td>exit</td>
	<td>Exit ramp off corridor</td>
      </tr>
      <tr>
	<td>3</td>
	<td>intersection</td>
	<td>At-grade intersection with another corridor</td>
      </tr>
      <tr>
	<td>4</td>
	<td>access</td>
	<td>Network access (for traveler information)</td>
      </tr>
      <tr>
	<td>5</td>
	<td>interchange</td>
	<td>Freeway interchange (for traveler information)</td>
      </tr>
    </table>
  </dd>
  <dt id='r_node_transition'>transition</dt>
  <dd>An r_node transition describes how entrance or exit nodes connect with
      linked nodes.
    <table>
      <tr>
	<th>Code</th>
	<th>Transition</th>
	<th>Description</th>
      </tr>
      <tr>
	<td>0</td>
	<td>none</td>
	<td>No transition &mdash; non-entrance or -exit r_nodes</td>
      </tr>
      <tr>
	<td>1</td>
	<td>loop</td>
	<td>Interchange loop ramp &mdash; "leaf" part of cloverleaf</td>
      </tr>
      <tr>
	<td>2</td>
	<td>leg</td>
	<td>Typical "leg" ramp</td>
      </tr>
      <tr>
	<td>3</td>
	<td>slipramp</td>
	<td>Transition ramp between parallel corridors</td>
      </tr>
      <tr>
	<td>4</td>
	<td>CD</td>
	<td>Transition to/from collector/distributor road</td>
      </tr>
      <tr>
	<td>5</td>
	<td>HOV</td>
	<td>Bypass ramp for high-occupancy-vehicles</td>
      </tr>
      <tr>
	<td>6</td>
	<td>common</td>
	<td>Common section joining two corridors</td>
      </tr>
      <tr>
	<td>7</td>
	<td>flyover</td>
	<td>Flyover ramp (bridge over mainline)</td>
      </tr>
    </table>
  </dd>
  <dt>lanes</dt>
  <dd>Number of lanes at r_node.
      For a ramp node, this is the number of lanes entering or exiting the
      mainline.
  </dd>
  <dt>shift</dt>
  <dd>Lane shift is the difference (number of lanes) between the corridor
      reference lane and the attach side of the r_node.
      This value is used for lane continuity analysis within a corridor.
      Each corridor has a reference lane, which corresponds to the leftmost
      lane along the entire corridor.
  </dd>
  <dt id='station_id'>station_id</dt>
  <dd>A unique identifier for the <a href="#vds">detectors</a> associated with a
      <a href="#station">station</a> r_node.
      It is displayed on the <a href="#traffic_layer">traffic layer</a>.
  </dd>
  <dt id='speed_limit'>speed_limit</dt>
  <dd>This is the posted speed limit at the r_node.
      The units are miles per hour, but should in future be dependent on locale
      (KPH).
      For ramp r_nodes, it may be used to indicate the advisory speed limit on
      the ramp.
      The limit is used in travel time estimation.
  </dd>
  <dt>pickable</dt>
  <dd>For deploying <a href="#dms">DMS</a> from <a href="#inc_locator">
      incidents</a>, an r_node can be marked pickable if the road name should be
      used on the sign message.
  </dd>
  <dt>above</dt>
  <dd>When rendering the <a href="#traffic_layer">traffic layer</a>, r_nodes are
      rendered in two passes.
      The second pass consists of r_nodes which have been marked <b>above</b>.
      This prevents overpasses from being drawn incorrectly.
  </dd>
  <dt>attach_side</dt>
  <dd>This flag indicates whether the r_node is attached to the left side of
      the road.
      This can be used to create left entrance or exit ramps.
  </dd>
  <dt>active</dt>
  <dd>This flag allows an r_node to be deactivated.  An inactive r_node will
      not be included in any corridor or drawn on the
      <a href="#traffic_layer">traffic layer</a>.
  </dd>
</dl>
<h4>R_Node Detectors</h4>
<p>
	The r_node <b>Detectors</b> tab allows vehicle
	<a href="#vds">detectors</a> to be created and associated
	with an r_node.
</p>

<h3 id="comm_links">Comm Links</h3>
<aside>
	Select <span class="menu">View ➔ Maintenance ➔ Comm Links</span> menu
	item
</aside>
<p>
	A <b>comm link</b> is a network connection to an external device or
	system.
	IRIS is capable of supporting hundreds of simultaneous comm links.
</p>
<p>
	The URI includes a DNS host name or network IP address, and port number,
	using the standard <code>host:port</code> convention.
	The URI can also contain an optional <b>scheme</b> prefix, which can be
	either <code>udp://</code>, <code>tcp://</code> or <code>modem://</code>.
	If present, the scheme will override the <b>default scheme</b> for the
	selected protocol.
	For example, to use the <a href="#pelcod">Pelco-D</a> protocol over TCP
	(instead of the default UDP), prepend <code>tcp://</code> to the URI.
</p>
<p>
	<b>Protocol</b> determines what type of device or system is on the other
	end of the comm link.
	The following table contains the communication protocols supported by
	IRIS:
</p>
<table id="prot_table">
	<tr>
	    <th>Protocol</th>
	    <th>Default Scheme</th>
	    <th><a href="#drop_address">Drop Address</a></th>
	    <th>Devices</th>
	    <th><a href="#io_pins">I/O Pins</a></th>
	</tr>
	<tr id="ntcip">
	    <td>NTCIP A</td>
	    <td>udp</td>
	    <td>N/A</td>
	    <td rowspan="3"><a href="#dms">DMS</a>,
	        <a href="#ilcs">ILCS</a>,
	        <a href="#rwis">RWIS</a>,
	        <a href="#vds">VDS</a>,
	        <a href="#gps">GPS</a>
	    </td>
	    <td rowspan="4">1</td>
	</tr>
	<tr>
	    <td>NTCIP B</td>
	    <td>tcp</td>
	    <td>1-8191</td>
	</tr>
	<tr>
	    <td>NTCIP C</td>
	    <td>tcp</td>
	    <td>N/A</td>
	</tr>
	<tr id="dms_xml">
	    <td>DMS-XML</td>
	    <td>tcp</td>
	    <td>0-65535</td>
	    <td><a href="#dms">DMS</a></td>
	</tr>
	<tr id="mndot170">
	    <td>MnDOT-170 4</td>
	    <td rowspan="2">tcp</td>
	    <td>1-15</td>
	    <td rowspan="2"><a href="#vds">VDS</a>,
	        <a href="#ramp_meters">Ramp Meters</a>,
		<a href="#beacons">beacons</a>,
	        <a href="#dlcs">DLCS</a>,
		<a href="#alarms">alarms</a>
	    </td>
	    <td rowspan="2"><a href="#mndot_pins">[*]</a</td>
	</tr>
	<tr>
	    <td>MnDOT-170 5</td>
	    <td>1-31</td>
	</tr>
	<tr id="ss105">
	    <td>SS105</td>
	    <td>tcp</td>
	    <td>1-9999</td>
	    <td rowspan="6"><a href="#vds">VDS</a></td>
	    <td rowspan="2">1-8</td>
	</tr>
	<tr id="ss125">
	    <td>SS125</td>
	    <td>tcp</td>
	    <td>0-65535</td>
	</tr>
	<tr id="g4">
	    <td>G4</td>
	    <td>tcp</td>
	    <td>0-65535</td>
	    <td>1-12</td>
	</tr>
	<tr id="canoga">
	    <td>Canoga</td>
	    <td>tcp</td>
	    <td>1-255</td>
	    <td>1-4</td>
	</tr>
	<tr id="dr500">
	    <td>DR-500</td>
	    <td>tcp</td>
	    <td>N/A</td>
	    <td>1</td>
	</tr>
	<tr id="dxm">
	    <td>DXM</td>
	    <td>tcp</td>
	    <td>N/A</td>
	    <td>11-86</td>
	</tr>
	<tr id="axis_ptz">
	    <td>Axis-PTZ</td>
	    <td>http</td>
	    <td>N/A</td>
	    <td rowspan="6"><a href="#ptz">PTZ</a></td>
	    <td rowspan="6">1</td>
	</tr>
	<tr id="pelcod">
	    <td>Pelco-D</td>
	    <td>udp</td>
	    <td>1-254</td>
	</tr>
	<tr id="manchester">
	    <td>Manchester</td>
	    <td>udp</td>
	    <td>1-1024</td>
	</tr>
	<tr id="vicon">
	    <td>Vicon</td>
	    <td>udp</td>
	    <td>1-254</td>
	</tr>
	<tr id="cohu">
	    <td>Cohu</td>
	    <td>tcp</td>
	    <td>1-223</td>
	</tr>
	<tr id="infinova">
	    <td>Infinova</td>
	    <td>tcp</td>
	    <td>1-254</td>
	</tr>
	<tr id="pelcop">
	    <td>Pelco-P</td>
	    <td>tcp</td>
	    <td>N/A</td>
	    <td><a href="#cam_kbd">Camera KBD</a></td>
	    <td>N/A</td>
	</tr>
	<tr>
	    <td><a href="#monstream">MonStream</a></td>
	    <td>udp</td>
	    <td>N/A</td>
	    <td><a href="#video">Monitors</a></td>
	    <td>1-16</td>
	</tr>
	<tr id="stc">
	    <td>STC</td>
	    <td>tcp</td>
	    <td>1-99</td>
	    <td><a href="#gate_arms">Gate Arm</a></td>
	    <td rowspan="3">1</td>
	</tr>
	<tr id="e6">
	    <td>E6</td>
	    <td>udp</td>
	    <td>N/A</td>
	    <td><a href="#tag_readers">Tag Reader</a></td>
	</tr>
	<tr id="redlion">
	    <td>RedLion</td>
	    <td>tcp</td>
	    <td>N/A</td>
	    <td><a href="#gps">GPS</a></td>
	</tr>
	<tr id="sierragx">
	    <td>SierraGX</td>
	    <td>tcp</td>
	    <td>N/A</td>
	    <td><a href="#gps">GPS</a></td>
	</tr>
	<tr id="dinrelay">
	    <td>DIN-Relay</td>
	    <td>http</td>
	    <td>N/A</td>
	    <td><a href="#dlcs">DLCS</a>, <a href="#beacons">beacons</a></td>
	    <td rowspan="2">1-8</td>
	</tr>
	<tr id="cbw">
	    <td>CBW</td>
	    <td>http</td>
	    <td>N/A</td>
	    <td><a href="#beacons">beacons</a></td>
	</tr>
	<tr id="org815">
	    <td>Org-815</td>
	    <td>tcp</td>
	    <td>N/A</td>
	    <td rowspan="2"><a href="#rwis">RWIS</a></td>
	    <td rowspan="4">1</td>
	</tr>
	<tr id="ssi">
	    <td>SSI</td>
	    <td>http</td>
	    <td>N/A</td>
	</tr>
	<tr id="msgfeed">
	    <td>Msg-Feed</td>
	    <td>http</td>
	    <td>N/A</td>
	    <td><a href="#msg_feed">DMS messages</a></td>
	</tr>
	<tr id="incfeed">
	    <td>Inc-Feed</td>
	    <td>http</td>
	    <td>N/A</td>
	    <td><a href="#inc_feed">Incidents</a></td>
	</tr>
</table>

<p/>
<h5 id="mndot_pins">I/O Pins For MnDOT-170 Protocol</h5>
<table>
	<tr>
	    <th>Device Type</th>
	    <th>I/O Pin(s)</th>
	</tr>
	<tr>
	    <td><a href="#ramp_meters">Ramp Meter</a></td>
	    <td>2 or 3</td>
	</tr>
	<tr>
	    <td><a href="#beacons">Beacon</a></td>
	    <td>2</td>
	</tr>
	<tr>
	    <td><a href="#dlcs">DLCS</a></td>
	    <td>19 - 36</td>
	</tr>
	<tr>
	    <td><a href="#vds">VDS</a></td>
	    <td>39 - 62</td>
	</tr>
	<tr>
	    <td><a href="#alarms">Alarms</a></td>
	    <td>70 - 79</td>
	</tr>
</table>
<p/>
<p id="poll_period">
	Poll <b>period</b> determines how frequently controllers on a comm
	link are polled.
	It can range from 5 seconds to 24 hours.
	After a poll, if a response is not received before the <b>timeout</b>
	expires, the communicaton will fail.
	For each poll, 2 retries will happen before the operation is aborted.
</p>

<h4 id="msg_feed">DMS Message Feed Protocol</h4>
<p>
	The <b>Msg-Feed</b> protocol can be used to interface IRIS with an
	external system that generates <a href="#dms">DMS</a> messages.
	Periodically, IRIS will poll the URI (using HTTP) for DMS messages.
	The external system should respond with an ASCII text file, with one
	line per message to be deployed.
</p>
<p>
	Each line must contain 3 fields, separated by tab characters
	<code>\t</code> (ASCII 0x09), and terminated with a single newline
	character <code>\n</code> (ASCII 0x0A).
	The fields are DMS name, <a href="#multi">MULTI</a> string, and
	expiration time.
	The DMS name must exactly match one of the DMS as identified by IRIS.
	The MULTI string specifies a message to display on the sign, using the
	MULTI markup language, from NTCIP 1203.
	For example, "ROAD CLOSED[nl]AHEAD[nl]LEFT LANE CLOSED" is a valid
	three-line MULTI message.
	The expiration field indicates the date and time that the message
	should expire.
	It is in <code>yyyy-MM-dd HH:mm:ssZ</code> format, which includes date,
	time and time zone.
	A valid expiration time would be 2012-05-15 11:37:00-0600.
</p>
<p>
	There are a couple of other required steps to enable a message feed
	to operate.
	First, an <a href="#action_plan">action plan</a> must be created which
	associates a <a href="#dms_action">DMS action</a> with the message
	feed.
	The DMS action must be associated with a <a href="#quick_msg">quick
	message</a> that references the message feed, using a <b>feed</b>
	<a href="#action_tag">action tag</a>.
	So, if the message feed is on a Comm Link called <code>LFEED</code>,
	then the quick message MULTI string must be <code>[feedLFEED]</code>.
	Also, the action plan must be active and deployed.
	This requirement allows only administrator-approved DMS to be controlled
	by the message feed.
</p>
<p>
	The other requirement for message feeds is that all messages used by
	the feed must be defined in the DMS message library.
	This requirement allows only administrator-approved messages to be
	deployed by the message feed.
	In some circumstances, it may be appropriate to disable this checking.
	For example, if the message feed host is fully trusted and there is no
	possibility of man-in-the-middle attacks between IRIS and the feed host.
	In this case <a href="#sys_attr"><code>msg_feed_verify</code></a> can be
	set to <code>false</code> to disable this check.
</p>
<p>
	To control DMS beacon activation through a message feed,
	configure 2 message feeds. One message feed is for DMS 
	containing messages with activated beacons and the other
	for messages with deactivated beacons. There is no way to 
	control which message feed is executed first, so each
	message feed must list each DMS and at least one of the 
	message feeds must contain a blank MULTI for each DMS. 
</p>

<h4 id="inc_feed">Incident Feed Protocol</h4>
<p>
	The <b>Inc-Feed</b> protocol can be used to interface IRIS with an
	external system that generates <a href="#incident">incidents</a>.
	Periodically, IRIS will poll the URI (using HTTP) for incidents.
	The external system should respond with an ASCII text file, with one
	line per active incident.
</p>
<p>
	Each line should contain 6 fields, separated by comma characters
	"<code>,</code>" and terminated with a single newline character
	<code>\n</code> (ASCII 0x0A).
	The fields are incident ID, type, incident detail, latitude, longitude,
	and camera ID.
	The type must be CRASH, STALL, ROADWORK, or HAZARD.
	The detail may be blank, or one of the incident detail names.
	Latitude and longitude must be coördinates of the incident.
	Camera ID may be blank, or the ID of a camera to view the incident.
</p>

<h3 id="controllers">Controllers</h3>
<aside>
	Select <span class="menu">View ➔ Maintenance ➔ Comm Links</span> menu
	item
</aside>
<p>
	A <b>controller</b> is an end-point for a <a href="#comm_links">comm
	link</a>.
	Each controller can have one or more associated <a href="#devices">
	devices</a>, depending on the <a href="#prot_table">protocol</a>.
	Sometimes a controller represents a separate physical <em>box</em>,
	which is connected to devices, and other times the controller may be
	embedded within the device.
	In any case, IRIS requires a controller for any communication to a
	device.
	Controllers can be assigned to a <b>cabinet</b>, which has location
	information, to allow displaying on a map.
</p>

<h4 id="drop_address">Drop Address</h4>
<p>
	Some <a href="#prot_table">protocols</a> support <b>multi-drop</b>
	addressing, while others are <b>single-drop</b> only.
	Multi-drop addressing allows multiple controllers to share the same
	<a href="#comm_links">comm link</a> &mdash; typically for serial
	communication.
	Each controller must be assigned a unique (to the comm link) drop
	address, which is used to route all messages sent to the controller.
	For single-drop protocols, the drop address is ignored.
</p>

<h4 id="ctrl_pwd">Controller Password</h4>
<p>
	Authentication is supported or required by some communication protocols.
	The controller <b>password</b> field is used to enter authentication
	data.
</p>
<p>
	For <a href="#ntcip">NTCIP</a>, this represents the SNMP
	<b>community</b> name.
	If no controller password is set, the <code>Public</code> community name
	will be used.
</p>
<p>
	Web-based devices may require HTTP Basic Authentication.
	For these types of devices, the password field should contain both the
	user name and password, separated by a colon (<code>user:password</code>).
	For <a href="#cbw">CBW</a>, the user name portion must be
	<code>none</code>.
	HTTP Basic Authentication can be enabled on the setup page of the
	<a href="#cbw">CBW</a> device (setup.html).
</p>
<p>
	<a href="#sierragx">SierraGX</a> modems can be configured to require
	authentiation.
	In this case, separate the username and password with a colon, in the
	same manner as HTTP basic authentication.
</p>

<h4 id="io_pins">I/O Pins</h4>
<p>
	Each controller has a set of <b>I/O pins</b>, to which
	<a href="#devices">devices</a> can be assigned.
	The function of these pins is protocol specific &mdash; see the
	<a href="#prot_table">protocol table</a> for details.
</p>

<h3 id="fonts">Fonts</h3>
<aside>
	Select <span class="menu">View ➔ Message Signs ➔ DMS Fonts</span> menu
	item
</aside>
<p>
	A font is a set of bitmapped glyphs for displaying text on a dynamic
	message sign (DMS).
	Each font can contain any of the printable characters in the ASCII
	character set (0x20 to 0x7E).
</p>
<p>
	When selecting a font, a few parameters must be considered, such as
	pixel pitch, desired character height, and font weight.
	Pixel pitch can vary from 66 mm down to 20 mm or smaller.
	Typically, for freeway signs, characters should be between 350 and 400
	mm (about 14 or 15 inches) high.
	See the table below for character heights based on these common sizes.
</p>
<table>
	<tr>
	    <th rowspan='2'>Font Height</th>
	    <th colspan='4'>Pixel Pitch</th>
	</tr>
	<tr>
	    <th>20 mm</th>
	    <th>33 mm</th>
	    <th>50 mm</th>
	    <th>66 mm</th>
	</tr>
	<tr>
	    <th>7 px</th>
	    <td>120 mm</td>
	    <td>198 mm</td>
	    <td>300 mm</td>
	    <td class='best'>396 mm</td>
	</tr>
	<tr>
	    <th>8 px</th>
	    <td>140 mm</td>
	    <td>231 mm</td>
	    <td class='best'>350 mm</td>
	    <td>462 mm</td>
	</tr>
	<tr>
	    <th>10 px</th>
	    <td>180 mm</td>
	    <td>297 mm</td>
	    <td>450 mm</td>
	    <td>594 mm</td>
	</tr>
	<tr>
	    <th>12 px</th>
	    <td>220 mm</td>
	    <td class='best'>363 mm</td>
	    <td>550 mm</td>
	    <td>726 mm</td>
	</tr>
	<tr>
	    <th>14 px</th>
	    <td>260 mm</td>
	    <td>429 mm</td>
	    <td>650 mm</td>
	    <td>858 mm</td>
	</tr>
	<tr>
	    <th>16 px</th>
	    <td>300 mm</td>
	    <td>495 mm</td>
	    <td>750 mm</td>
	    <td>990 mm</td>
	</tr>
	<tr>
	    <th>18 px</th>
	    <td>340 mm</td>
	    <td>561 mm</td>
	    <td>850 mm</td>
	    <td>1122 mm</td>
	</tr>
	<tr>
	    <th>20 px</th>
	    <td class='best'>380 mm</td>
	    <td>627 mm</td>
	    <td>950 mm</td>
	    <td>1254 mm</td>
	</tr>
</table>
<p>
	In the past, DMS have been used with upper-case only fonts, but with
	smaller pixel pitch, it is possible to create legible fonts which
	also include lower-case characters.
	If a message containing lower-case characters is used with an upper-case
	only font, IRIS will replace those characters with their equivalent.
</p>
<p>
	A number of fonts are included in the sql/fonts directory.
	These fonts are designed to have a similar visual style.
	To import a font into the IRIS database, use psql:
</p>
<pre class="code">psql tms -f <em>[font file]</em></pre>
<table>
	<tr>
	    <th>Number</th>
	    <th>Font Name</th>
            <th>Description</th>
	</tr>
	<tr>
	    <td>1</td>
	    <td>07_char</td>
	    <td>7x5 character matrix</td>
	</tr>
	<tr>
	    <td>2</td>
	    <td>07_line</td>
	    <td>7 pixel high line-matrix</td>
	</tr>
	<tr>
	    <td>3</td>
	    <td>08_full</td>
	    <td>8 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>4</td>
	    <td>09_full</td>
	    <td>9 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>5</td>
	    <td>10_full</td>
	    <td>10 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>6</td>
	    <td>11_full</td>
	    <td>11 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>7</td>
	    <td>12_full</td>
	    <td>12 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>8</td>
	    <td>12_full_bold</td>
	    <td>12 pixel high full-matrix bold</td>
	</tr>
	<tr>
	    <td>9</td>
	    <td>13_full</td>
	    <td>13 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>11</td>
	    <td>14_full</td>
	    <td>14 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>12</td>
	    <td>14_full_thin</td>
	    <td>14 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>21</td>
	    <td>15_full</td>
	    <td>15 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>13</td>
	    <td>16_full</td>
	    <td>16 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>14</td>
	    <td>18_full</td>
	    <td>18 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>15</td>
	    <td>20_full</td>
	    <td>20 pixel high full-matrix (numerals only)</td>
	</tr>
	<tr>
	    <td>16</td>
	    <td>24_full</td>
	    <td>24 pixel high full-matrix (numerals only)</td>
	</tr>
	<tr>
	    <td>20</td>
	    <td>26_full</td>
	    <td>26 pixel high full-matrix</td>
	</tr>
	<tr>
	    <td>17</td>
	    <td>_09_full_12</td>
	    <td>9 pixel high (12 with lower case descenders)</td>
	</tr>
</table>
<p>
	The IRIS client also contains a font editor which can be used to design
	new DMS fonts.
</p>

<h2 id="devices">Devices</h2>
<p>
	A device is a hardware field control or sensing system.
	IRIS supports several different device types:
	<a href="#dms">dynamic message signs</a>,
	<a href="#lcs">lane-use control signs</a>,
	<a href="#vds">vehicle detection</a>,
	<a href="#cameras">cameras</a>,
	<a href="#video">video monitors</a>,
	<a href="#ramp_meters">ramp meters</a>,
	<a href="#gate_arms">gate arms</a>,
	<a href="#tag_readers">tag readers</a>,
	<a href="#beacons">beacons</a>,
	<a href="#alarms">alarms</a>,
	<a href="#rwis">road weather information systems</a> and
	<a href="#gps">GPS</a>.
</p>
<p>
	For any device to be activated, it must first be connected to one of the
	<a href="#io_pins">I/O pins</a> on a
	<a href="#controllers">controller</a>.
	The controller must also be associated with a
	<a href="#comm_links">comm link</a> which communicates using the
	appropriate protocol for the device.
</p>

<h3 id="dms">Dynamic Message Signs (DMS)</h3>
<aside>
	Select <span class="menu">View ➔ Message Signs ➔ DMS</span> menu item
</aside>
<p>
	A dynamic message sign (DMS) is a sign which is capable of changing the
	message displayed to motorists.
	They can be classified as character-matrix, line-matrix and full-matrix,
	depending on the spacing between pixels.
	Some are monochrome, and some support full color display.
	All of these configurations are supported by IRIS.
</p>
<p>
	The following operations can be performed on a DMS:
</p>
<ul>
	<li>Querying currently displayed message</li>
	<li>Displaying new messages</li>
	<li>Querying configuration information</li>
	<li>Querying diagnostic information</li>
	<li>Sending fonts and graphics</li>
</ul>

<h4>DMS Setup</h4>
FIXME

<h4 id="multi">MULTI (Markup Language for Transportation Information)</h4>
<p>
	DMS messages are specified using <b>MULTI</b>, as defined by the
	NTCIP 1203 standard.
	In MULTI, messages are simple ASCII strings, with formatting or other
	instructions denoted by tags inside square brackets.
	For example, the tag <code>[nl]</code> indicates a new line.
	Most of the useful MULTI tags are supported.
</p>
<table>
	<tr>
	    <th>Tag</th>
	    <th>Description</th>
	    <th>Supported</th>
	</tr>
	<tr>
	    <td>[cb<i>x</i>]</td>
	    <td>Message background color</td>
	    <td>Yes</td>
	</tr>
	<tr>
	    <td>[pb<i>z</i>]</td>
	    <td rowspan="2">Page background color</td>
	    <td rowspan="2">Yes</td>
	</tr>
	<tr>
	    <td>[pb<i>r</i>,<i>g</i>,<i>b</i>]</td>
	</tr>
	<tr>
	    <td>[cf<i>x</i>]</td>
	    <td rowspan="2">Foreground color</td>
	    <td rowspan="2">Yes</td>
	</tr>
	<tr>
	    <td>[cf<i>r</i>,<i>g</i>,<i>b</i>]</td>
	</tr>
	<tr>
	    <td>[cr<i>x</i>,<i>y</i>,<i>w</i>,<i>h</i>,<i>z</i>]</td>
	    <td rowspan="2">Color rectangle</td>
	    <td rowspan="2">Yes</td>
	</tr>
	<tr>
	    <td>[cr<i>x</i>,<i>y</i>,<i>w</i>,<i>h</i>,<i>r</i>,<i>g</i>,<i>b</i>]</td>
	</tr>
	<tr>
	    <td>[f<i>x</i>,<i>y</i>]</td>
	    <td>Field data</td>
	    <td>No</td>
	</tr>
	<tr>
	    <td>[flt<i>x</i>o<i>y</i>]</td>
	    <td rowspan="2">Flashing text</td>
	    <td rowspan="2">No</td>
	</tr>
	<tr>
	    <td>[flo<i>y</i>t<i>x</i>]</td>
	</tr>
	<tr>
	    <td>[fo<i>x</i>]</td>
	    <td rowspan="2">Change font</td>
	    <td rowspan="2">Yes</td>
	</tr>
	<tr>
	    <td>[fo<i>x</i>,<i>cccc</i>]</td>
	</tr>
	<tr>
	    <td>[g<i>n</i>]</td>
	    <td rowspan="3">Place graphic</td>
	    <td rowspan="3">Yes</td>
	</tr>
	<tr>
	    <td>[g<i>n</i>,<i>x</i>,<i>y</i>]</td>
	</tr>
	<tr>
	    <td>[g<i>n</i>,<i>x</i>,<i>y</i>,<i>cccc</i>]</td>
	</tr>
	<tr>
	    <td>[hc<i>n</i>]</td>
	    <td>Hexadecimal character</td>
	    <td>No</td>
	</tr>
	<tr>
	    <td>[jl<i>n</i>]</td>
	    <td>Line justification</td>
	    <td>Yes</td>
	</tr>
	<tr>
	    <td>[jp<i>n</i>]</td>
	    <td>Page justification</td>
	    <td>Yes</td>
	</tr>
	<tr>
	    <td>[ms<i>x</i>,<i>y</i>]</td>
	    <td>Manufacturer specific</td>
	    <td>No</td>
	</tr>
	<tr>
	    <td>[mv<i>…</i>]</td>
	    <td>Moving text</td>
	    <td>No</td>
	</tr>
	<tr>
	    <td>[nl]</td>
	    <td rowspan="2">New line</td>
	    <td rowspan="2">Yes</td>
	</tr>
	<tr>
	    <td>[nl<i>s</i>]</td>
	</tr>
	<tr>
	    <td>[np]</td>
	    <td>New page</td>
	    <td>Yes</td>
	</tr>
	<tr>
	    <td>[pt<i>n</i>]</td>
	    <td rowspan="2">Page time</td>
	    <td rowspan="2">Yes</td>
	</tr>
	<tr>
	    <td>[pt<i>n</i>o<i>f</i>]</td>
	</tr>
	<tr>
	    <td>[sc<i>x</i>]</td>
	    <td>Character spacing</td>
	    <td>Yes</td>
	</tr>
	<tr>
	    <td>[tr<i>x</i>,<i>y</i>,<i>w</i>,<i>h</i>]</td>
	    <td>Text rectangle</td>
	    <td>Yes</td>
	</tr>
</table>
<br/>

<h4 id="quick_msg">Quick Messages</h4>
<p>
	A quick message is a fully composed DMS message which can be associated
	with a sign group.
	When a DMS is selected, a drop-down list is populated with quick
	messages from sign groups of which that DMS is a member.
	Quick messages are also be used for <a href="#dms_action">DMS
	actions</a> as part of an <a href="#action_plan">action plan</a>.
	For these messages, it is best to leave the sign group blank.
</p>
<p>
	<b>Prefix Page</b> is a flag which indicates that the quick message can
	be combined with an operator message.
	When a DMS action uses a "prefix page" quick message, operator messages
	will be modified by prepending the quick message before each page.
	Care must be taken to ensure the combined message can be displayed on
	the sign.
	This feature could be used, for example, to put a graphic logo on all
	messages displayed on a sign.
</p>

<h4 id="spellchecker">Spell Checker</h4>
<aside>
	Select <span class="menu">View ➔ Message Signs ➔ Dictionary</span> menu
	item
</aside>
<p>
	The spell checker verifies <a href="#dms">DMS</a> messages when an
	operator presses the <b>Send</b> button.
	It uses two word lists: <b>Allowed</b> and <b>Banned</b>.
</p>
<p>
	Allowed word checking is controlled by <a href="#sys_attr"><code>
	dict_allowed_scheme</code></a>:
</p>
<dl>
	<dt>0</dt>
	<dd>Disable checking allowed word list</dd>
	<dt>1</dt>
	<dd>Suggest replacement of words not in allowed list</dd>
	<dt>2</dt>
	<dd>Reject messages containing words not in allowed list</dd>
</dl>
<p>
	Similarly, <a href="#sys_attr"><code>dict_banned_scheme</code></a>
	controls banned word functionality:
</p>
<dl>
	<dt>0</dt>
	<dd>Disable checking banned word list</dd>
	<dt>1</dt>
	<dd>Suggest replacement of words in banned list</dd>
	<dt>2</dt>
	<dd>Reject messages containing words in banned list</dd>
</dl>
<p>
	When appropriate, a form appears to suggest changes or inform the
	operator of a rejected message.
</p>

<h3 id="lcs">Lane-use Control Signs (LCS)</h3>
<aside>
	Select <span class="menu">View ➔ Lane Use ➔ LCS</span> menu item
</aside>
<p>
	A lane-use control sign (LCS) is a sign which is mounted over a single
	lane of traffic (typically one for each lane).
	It can display a set of indications which either permit or restrict
	use of that lane.
</p>

<h4 id="ilcs">"Intelligent" Lane-use Control Signs (ILCS)</h4>
<p>
	An <em>intelligent</em> LCS is a full-matrix color <a href="#dms">DMS</a>
	which is mounted directly over a lane of traffic.
	In addition to being used as an LCS, it can display
	<a href="vsa.html">variable speed advisories</a>, or any operator-defined
	message as a regular DMS.
</p>

<h4 id="dlcs">"Dumb" Lane-use Control Signs (DLCS)</h4>
<p>
	A <em>dumb</em> LCS device is much simpler than an ILCS.
	It can display one of a fixed set of indications &mdash; typically a
	<i>green arrow</i> <span class="green">&nbsp;↓&nbsp;</span>, a
	<i>yellow arrow</i> <span class="yellow">&nbsp;↓&nbsp;</span> or a
	<i>red X</i> <span class="red">&nbsp;X&nbsp;</span>).
	Each indication must be assigned to a separate
	<a href="#io_pins">I/O pin</a> on a
	<a href="#controllers">controller</a>, as well as the DMS which
	represents the LCS.
</p>

<h3 id="vds">Vehicle Detection Systems</h3>
<p>
	There are several types of <b>vehicle detection systems</b> (VDS).
	The earliest of these is the <b>inductive loop</b>, which is a wire
	looped under the road surface.
	Some systems use <b>radar</b> mounted on the side of the road.
	<b>Video detection</b> uses a camera and computer vision software.
	Collectively, these systems are simply called <b>detectors</b>.
</p>

<h4 id="traffic_data">Traffic Data</h4>
<p>
	Most detectors sample traffic data in fixed time intervals and put it
	into <a href="#binned_data">bins</a>.
	IRIS can store these types of binned traffic data:
</p>
<table>
<tr>
	<th>Sample Type</th>
	<th>Description</th>
	<th>Code</th>
	<th>Sample Size</th>
</tr>
<tr>
	<td>Vehicle Count</td>
	<td>Number of vehicles detected</td>
	<td>v</td>
	<td>8 bits</td>
</tr>
<tr>
	<td>Motorcycle Count</td>
	<td>Number of vehicles up to 7'</td>
	<td>vmc</td>
	<td>8 bits</td>
</tr>
<tr>
	<td>Small Count</td>
	<td>Number of vehicles between 7 and 20'</td>
	<td>vs</td>
	<td>8 bits</td>
</tr>
<tr>
	<td>Medium Count</td>
	<td>Number of vehicles between 20 and 43'</td>
	<td>vm</td>
	<td>8 bits</td>
</tr>
<tr>
	<td>Large Count</td>
	<td>Number of vehicles 43' or longer</td>
	<td>vl</td>
	<td>8 bits</td>
</tr>
<tr>
	<td>Occupancy</td>
	<td>Percent of time a vehicle occupied the detection zone (fixed
	    point 0.00 to 100.00)</td>
	<td>op</td>
	<td>16 bits</td>
</tr>
<tr>
	<td>Scans</td>
	<td>Number of scans during which a vehicle occupied the detection zone
	    (0 to 1800)</td>
	<td>c</td>
	<td>16 bits</td>
</tr>
<tr>
	<td>Speed</td>
	<td>Average speed (mph) of vehicles detected</td>
	<td>s</td>
	<td>8 bits</td>
</tr>
</table>
<p>
	Instead of binning, some detectors can record a <a href="#veh_log">
	vehicle log</a>, with information about each detected vehicle, such as
	headway and speed.
</p>
<p>
	Every 30 seconds, an XML file is generated containing the most recent
	sample data from all defined detectors.
	The file is called <code>det_sample.xml.gz</code>, and it is written to
	the <a href="troubleshooting.html#xml-output">XML output directory</a>
</p>

<h4>Detector Setup</h4>
<p>
	To create a detector, first select the <a href="#r_node">r_node</a>
	at the proper location.
	Then select the <b>Detectors</b> tab for that r_node.
	Enter the detector <b>Name</b> and press the <b>Create</b> button.
</p>
<p>
	After selecting a detector in the r_node detector table, its properties,
	such as <b>lane type</b> and <b>lane #</b> can be changed.
	In IRIS, lanes are numbered from right-to-left, starting with the
	right lane as 1.
	A <b>label</b> will be created from this information, including
	abbreviations of the <a href="#roads">roads</a> associated with the
	<a href="#r_node">r_node</a>.
</p>
<p>
	The <b>field length</b> of a detector determines how density and speed
	are estimated from counts and occupancy.
	It is in units of feet.
</p>

<h4>Detector Protocols</h4>
<p>
	IRIS supports several different <a href="#prot_table">protocols</a> for
	communicating with vehicle detection systems.
	The protocol used depends on the <a href="#comm_links">comm link</a> of
	the <a href="#controllers">controller</a> to which it is assigned.
	The following table summarizes features of each protocol.
</p>
<table>
	<tr>
	    <th>Protocol</th>
	    <th>Binning</th>
	    <th>Traffic Data</th>
	</tr>
	<tr>
	    <th><a href="#ntcip">NTCIP</a></th>
	    <td>0-255 seconds</td>
	    <td rowspan="2">Count, Occupancy</td>
	</tr>
	<tr>
	    <th><a href="#mndot170">MnDOT-170</a></th>
	    <td>30 seconds</td>
	</tr>
	<tr>
	    <th><a href="#ss105">SS105</a></th>
	    <td>5 seconds to 1 month</td>
	    <td rowspan="3">Count, Occupancy, Speed, Classification</td>
	</tr>
	<tr>
	    <th><a href="#ss125">SS125</a></th>
	    <td>5 seconds to 1 month (?)</td>
	</tr>
	<tr>
	    <th><a href="#g4">G4</a></th>
	    <td>10 seconds to 1 hour</td>
	</tr>
	<tr>
	    <th><a href="#canoga">Canoga</a></th>
	    <td>N/A (vehicle logging)</td>
	    <td>Timestamp, Speed (double loops)</td>
	</tr>
	<tr>
	    <th><a href="#dr500">DR-500</a></th>
	    <td>1-5? minutes</td>
	    <td>Speed</td>
	</tr>
	<tr>
	    <th><a href="#dxm">DXM</a></th>
	    <td>N/A (presence)</td>
	    <td>Magnetic Field</td>
	</tr>
</table>
<p>
	For protocols which allow the binning intereval to be adjusted, it will
	be set to the poll <a href="#poll_period">period</a> of the comm link.
</p>

<h4>Configuration Changes</h4>
<p>
	It is possible to move a detector to another r_node.
	Select the target r_node and enter the detector <b>Name</b>.
	The current label for that detector will appear on the right.
	To move it to the current r_node, press the <b>Transfer</b> button.
</p>
<p>
	If a detector is no longer used, it can be marked <b>abandoned</b>.
</p>

<h4>Detector Failure</h4>
<p>
	IRIS checks traffic data continuously for common detector failures.
	These are some possible problems:
</p>
<dl>
	<dt>no hits</dt>
	<dd>No vehicles counted for a duration determined by lane type</dd>
	<dt>chatter</dt>
	<dd>Unreasonably high vehicle count</dd>
	<dt>locked on</dt>
	<dd>Occupancy at 100% for a duration determined by lane type</dd>
	<dt>no change</dt>
	<dd>No change in occupancy for 24 hours</dd>
</dl>
<p>
	When one of these conditions first occurs and every hour that it
	persists, an event is logged in the <code>detector_event</code> database
	table.
	The <code>detector_auto_fail_view</code> can be used to check recent
	events.
</p>
<p>
	If <a href="#sys_attr"><code>detector_auto_fail_enable</code></a> is
	<code>true</code>, the <b>auto fail</b> flag is set and cleared when
	these problems come and go.
</p>
<p>
	If a detector has a fault which is not handled automatically, it can be
	<b>force failed</b>.
	This flag is only set manually, so it must be cleared once the failure
	is corrected.
</p>
<p>
	When a detector is failed (<b>auto fail</b> or <b>force fail</b>), its
	data will not be used for <a href="#travel_time">travel time</a>,
	<a href="#ramp_meters">ramp metering</a>, etc.
	In that case, <b>fake</b> detection could be used &mdash; this field can
	contain one or more other detector names, separated by spaces.
	The average density or speed of those detectors (which are not also
	failed) will be used instead.
</p>

<h4 id="vds_archiving">Traffic Data Archiving</h4>
<p>
	Sample data is archived only if <a href="#sys_attr"><code>
	sample_archive_enable</code></a> is <code>true</code>.
	Files are stored in <code>/var/lib/iris/traffic</code>, in a directory
	with the <a href="#district">district</a> name.
	Within that directory a new subdirectory is created for each year, with
	a 4-digit name (<code>1994-9999</code>).
</p>
<p>
	As data is collected, a new subdirectory is created every day &mdash;
	the name is 8-digits: year (<code>1994-9999</code>), month
	(<code>01-12</code>) and day-of-month (<code>01-31</code>).
	At 10 PM, all traffic data from the previous day is moved into a single
	ZIP file with the 8-digit base name and a <code>.traffic</code>
	extension.
</p>

<h4 id="binned_data">Daily Binned Traffic Data</h4>
<p>
	A binned sample file consists of some number of periods of equal
	duration.
	The first period begins (and the last period ends) at midnight.
	The <b>binning interval</b> determines the number of samples collected
	per day &mdash; a shorter interval results in more samples.
	If the period is longer than 30 seconds, the samples are allocated
	evenly into 30-second bins for storage.
</p>
<table>
<tr>
	<th>Period</th>
	<th>Binning Interval</th>
	<th>Samples</th>
	<th>Stored Bins</th>
</tr>
<tr>
	<td>5</td>
	<td>5 seconds</td>
	<td>17280</td>
	<td>5 seconds</td>
</tr>
<tr>
	<td>6</td>
	<td>6 seconds</td>
	<td>14400</td>
	<td>6 seconds</td>
</tr>
<tr>
	<td>10</td>
	<td>10 seconds</td>
	<td>8640</td>
	<td>10 seconds</td>
</tr>
<tr>
	<td>15</td>
	<td>15 seconds</td>
	<td>5760</td>
	<td>15 seconds</td>
</tr>
<tr>
	<td>20</td>
	<td>20 seconds</td>
	<td>4320</td>
	<td>20 seconds</td>
</tr>
<tr>
	<td>30</td>
	<td>30 seconds</td>
	<td>2880</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>60</td>
	<td>60 seconds</td>
	<td>1440</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>90</td>
	<td>90 seconds</td>
	<td>960</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>120</td>
	<td>2 minutes</td>
	<td>720</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>240</td>
	<td>4 minutes</td>
	<td>360</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>300</td>
	<td>5 minutes</td>
	<td>288</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>600</td>
	<td>10 minutes</td>
	<td>144</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>900</td>
	<td>15 minutes</td>
	<td>96</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>1200</td>
	<td>20 minutes</td>
	<td>72</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>1800</td>
	<td>30 minutes</td>
	<td>48</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>3600</td>
	<td>60 minutes</td>
	<td>24</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>7200</td>
	<td>2 hours</td>
	<td>12</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>14400</td>
	<td>4 hours</td>
	<td>6</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>28800</td>
	<td>8 hours</td>
	<td>3</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>43200</td>
	<td>12 hours</td>
	<td>2</td>
	<td>30 seconds</td>
</tr>
<tr>
	<td>86400</td>
	<td>24 hours</td>
	<td>1</td>
	<td>30 seconds</td>
</tr>
</table>
<p>
	For each detector, a binned sample file is created for each sampled
	traffic data type.
	The base file name is the detector name.
	The extension is the <a href="#traffic_data">traffic data</a>
	<b>code</b> followed by the <b>period</b> (in seconds).
	For example, 60-second vehicle count samples collected from detector
	100 would be stored in a file called <code>100.v60</code>, containing
	2880 bins.
</p>
<p>
	Each data sample is either an 8- or 16-bit signed integer, depending on
	the sample type.
	16-bit samples are in high-byte first order.
	A negative value (-1) indicates a missing sample.
	Any data outside the valid ranges should be considered <em>bad</em>.
</p>

<h4 id="veh_log">Individual Vehicle Logging</h4>
<p>
	The <code>.vlog</code> format is a comma-separated text log with one
	line for each vehicle detected.
	Each line ends with a newline <code>\n</code> (ASCII 0x0A).
	If present, <b>duration</b>, <b>headway</b>, and <b>speed</b> are
	positive integer values.
	Missing duration or headway values are represented by a <code>?</code>
	character.
	A gap in sampling data is represented by <code>*</code> on a line by
	itself.
</p>
<table>
<tr>
	<th>Column</th>
	<th>Name</th>
	<th>Description</th>
</tr>
<tr>
	<td>1</td>
	<td>Duration</td>
	<td>Number of milliseconds the vehicle occupied the detector</td>
</tr>
<tr>
	<td>2</td>
	<td>Headway</td>
	<td>Number of milliseconds bewteen vehicle start times</td>
</tr>
<tr>
	<td>3</td>
	<td>Time stamp</td>
	<td>24-hour HH:MM:SS format (may be omitted if headway is valid)</td>
</tr>
<tr>
	<td>4</td>
	<td>Speed</td>
	<td>Speed in miles per hour (if available)</td>
</tr>
</table>

<p>
	Interpreting sample <code>.vlog</code> data:
</p>
<table>
<tr>
	<th>Log Data</th>
	<th>Duration</th>
	<th>Headway</th>
	<th>Time</th>
	<th>Speed</th>
</tr>
<tr>
	<td>296,9930,17:49:36</td>
	<td>296</td>
	<td>9930</td>
	<td>17:49:36</td>
	<td>?</td>
</tr>
<tr>
	<td>231,14069</td>
	<td>231</td>
	<td>14069</td>
	<td>17:49:50</td>
	<td>?</td>
</tr>
<tr>
	<td>240,453,,45</td>
	<td>240</td>
	<td>453</td>
	<td>17:49:50</td>
	<td>45</td>
</tr>
<tr>
	<td>296,23510,,53</td>
	<td>296</td>
	<td>23510</td>
	<td>17:50:14</td>
	<td>53</td>
</tr>
<tr>
	<td>259,1321</td>
	<td>259</td>
	<td>1321</td>
	<td>17:50:15</td>
	<td>?</td>
</tr>
<tr>
	<td>?,?</td>
	<td>?</td>
	<td>?</td>
	<td>?</td>
	<td>?</td>
</tr>
<tr>
	<td>249,?</td>
	<td>249</td>
	<td>?</td>
	<td>17:50:24</td>
	<td>?</td>
</tr>
<tr>
	<td>323,4638,17:50:28</td>
	<td>323</td>
	<td>4638</td>
	<td>17:50:28</td>
	<td>?</td>
</tr>
<tr>
	<td>258,5967</td>
	<td>258</td>
	<td>5967</td>
	<td>17:50:33</td>
	<td>?</td>
</tr>
<tr>
	<td>111,1542</td>
	<td>111</td>
	<td>1542</td>
	<td>17:50:35</td>
	<td>?</td>
</tr>
<tr>
	<td>304,12029</td>
	<td>304</td>
	<td>12029</td>
	<td>17:50:47</td>
	<td>?</td>
</tr>
</table>
<br/>

<h3 id="cameras">Cameras</h3>
<p>
	Video cameras with remote <a href="#ptz">pan / tilt / zoom</a>
	capability can be used to monitor freeway conditions.
	The <b>Camera</b> tab can display Motion JPEG (MJPEG) video.
	To view MPEG4 or h.264 video, the <a href="#monstream">MonStream</a>
	application is required.
</p>
<h4 id="video_servlet">Video Servlet</h4>
<p>
	The <b>video</b> servlet is a proxy server which provides MJPEG streams
	to IRIS clients.
	Properties in the <a href="#client_properties">
	iris-client.properties</a> file are used to configure use of the
	video servlet: <code>video.host</code>, <code>video.port</code>, and
	<code>district</code>.
	When specified, video requests will be made to
	<code>http://<i>[video.host]</i>:<i>[video.port]</i>/video/stream/<i>[district]</i>/<i>[camera_name]</i></code>.
	Otherwise, requests will be made directly to the camera's
	<a href="#encoder">encoder</a> address.
</p>

<aside>
	Select <span class="menu">View ➔ Video ➔ Encoder Types</span> menu item
</aside>
<h4 id="encoder_type">Encoder Types</h4>
<p>
	An encoder type represents a specific make and model of video encoder.
	It determines how video request URIs are formed.
</p>
<dl>
    <dt>Encoder Type</dt>
    <dd>Make / model name</dd>
    <dt>Encoding</dt>
    <dd>Stream encoding: MJPEG, MPEG2, MPEG4, H264</dd>
    <dt>URI Scheme</dt>
    <dd>Scheme part of request URI: <code>rtsp</code> / <code>http</code></dd>
    <dt>URI Path</dt>
    <dd>Path part of request URI.
        This could be the location of an SDP file, for example.
        To include the encoder channel number in the path, use
        <code>{chan}</code>.
    </dd>
    <dt>Latency</dt>
    <dd>Buffering latency for consuming stream</dd>
</dl>

<aside>
	Select <span class="menu">View ➔ Video ➔ Cameras</span> menu item
</aside>
<h4 id="encoder">Video Encoders</h4>
<p>
	The <b>Setup</b> tab within a camera properties form contains attributes
	to configure the encoded stream.
</p>
<dl>
    <dt>#</dt>
    <dd>Camera number, used for <a href="#cam_kbd">keyboard systems</a>.</dd>
    <dt>Encoder Type</dt>
    <dd>The <a href="#encoder_type">type of encoder</a> for the video stream.
    </dd>
    <dt>Encoder Address</dt>
    <dd>The host name or IP address of the encoder.
        If the encoder type does not specify a path, it can also be included
        here.
        If a URI scheme is included, it will be used instead of the scheme from
        the encoder type.
    </dd>
    <dt>Encoder Multicast Address</dt>
    <dd>A multicast address can be used by <a href="#monstream">MonStream</a>
        clients.
        If defined, it will be used instead of the encoder address.
        It must be a UDP address in the multicast range, including port.
        Multicast requires less bandwidth, and allows scaling to many
        simultaneous streams.</dd>
    <dt>Encoder Channel</dt>
    <dd>This only needs to be specified if the URI path of the encoder type
        requires it.</dd>
</dl>
<h4 id="ptz">Pan / Tilt / Zoom</h4>
<p>
	Many cameras have built-in pan/tilt/zoom (PTZ) functionality.
	The following operations can be performed:
</p>
<ul>
	<li>Panning or tilting the camera</li>
	<li>Zooming in or out</li>
	<li>Manual focus: near / far</li>
	<li>Manual iris: open / close</li>
	<li>Wiper control</li>
	<li>Recall <a href="#preset">preset</a> positions</li>
	<li>Store <a href="#preset">preset</a> positions</li>
</ul>
<p>
	For PTZ control to function, the camera must be associated with a
	<a href="#controllers">controller</a> on a PTZ protocol
	<a href="#comm_links">comm link</a>.
</p>
<p>
	A selected camera can be panned and/or tilted by clicking on the video
	display on the <b>Camera</b> tab.
	The pan/tilt speed will vary depending on distance from the mouse-click
	to the center of the image.
	Similarly, using a mouse wheel on the video display will cause the
	camera to zoom in or out.
</p>
<p>
	Below the video display, there are also buttons for PTZ, as well as
	focus, iris and wiper control.
</p>
<h4 id="preset">Presets</h4>
<p>
	The <b>Preset</b> tab within a camera properties form can be used to
	configure up to 12 presets per camera.
	A preset can be associated with either a compass direction or a device,
	such as <a href="#dms">DMS</a> or <a href="#ramp_meters">ramp meter</a>.
	To associate a preset with a device, enable the preset, then select
	that preset on the <b>Location</b> tab of the device's properties form.
</p>
<h4 id="cam_tool">Camera Selector Tool</h4>
<p>
	The camera selector tool is on the toolbar just below the map.
	It has a text entry field with a camera icon and label.
	This tool enables quick switching of the selected camera.
</p>
<p>
	The keyboard "numpad" can be used from anywhere within IRIS to control
	the camera selector tool.
	When the <b>Num Lock</b> key is off, all numpad keystrokes are directed
	to the tool.
	The <b>+</b> and <b>-</b> keys can select the next and previous cameras,
	respectively.
	Pressing the <b>.</b> key (on the numpad) changes to
	<a href="#video">video monitor</a> selection mode &mdash; the icon will
	change to a monitor.
	Pressing the <b>*</b> key (on the numpad) changes to
	<a href="#playlist">play list</a> selection mode &mdash; the icon will
	change to a play list.
</p>

<h4 id="cam_kbd">Camera Keyboards</h4>
<p>
	Dedicated keyboards are supported for easier camera control.
	These keyboards have joysticks for <a href="#ptz">pan / tilt / zoom</a>
	control.
	Two protocols are supported: <a href="#pelcop">Pelco-P</a> and
	Panasonic CU-950.
</p>
<p>
	To configure a <a href="#pelcop">Pelco-P</a> keyboard, a comm link using
	the <code>pelcop</code> protocol must be created.
	One active controller must exist on that comm link, but no devices
	are necessary.
	IRIS will initiate a TCP connection to connect to the keyboard &mdash;
	typically, this will be managed by an ethernet-to-serial device.
</p>
<p>
	For Panasonic CU-950 keyboards, <a href="#sys_attr"><code>
	camera_kbd_panasonic_enable</code></a> must be enabled.
	This will cause IRIS to listen for connections on TCP port 7001.
	The keyboard must be configured with the IRIS server's IP address.
</p>

<h3 id="video">Video Monitors</h3>
<aside>
	Select <span class="menu">View ➔ Video ➔ Video Monitor</span> menu item
</aside>
<p>
	IRIS can also be configured to send commands to a video switcher
	system, such as <a href="#monstream">MonStream</a>.
	This allows camera streams to be routed to any number of video monitors.
	Each monitor can be assigned to display the video from any camera.
</p>
<h4>Monitor Selection</h4>
<p>
	On the upper-right of the <b>Camera</b> tab, there is a monitor
	selector.
	The chosen monitor will switch whenever the user selects a new camera.
</p>
<h4 id="monstream">MonStream</h4>
<p>
	<b>MonStream</b> is a full-screen video streaming application which runs
	on low-cost Linux computers.
	IRIS can send switching messages to MonStream, creating a low-latency
	IP video system.
</p>
<p>
	A computer running MonStream can be configured to stream a grid of four
	or more video feeds onto a single large monitor.
	The only configuration required on the MonStream computer is to grant
	access to the <code>/var/lib/monstream/</code> directory for the UID of
	the monstream process.
</p>
<p>
	A <a href="#controllers">controller</a> must be configured to represent
	each MonStream computer.
	It will need to be on a <a href="#comm_links">comm link</a> using the
	MonStream protocol, with a timeout of 2000 ms.
	The comm link URI should be of the form: <code>[ip address]:7001</code>.
	Each video monitor to be displayed should be associated with an IO pin
	of the controller.
	For example, a quad-screen monitor would have monitors associated with
	pins 1 thru 4.
</p>

<h4 id="playlist">Play Lists</h4>
<aside>
	Select <span class="menu">View ➔ Video ➔ Play Lists</span> menu item
</aside>
<p>
	Play lists can be created to cycle through related cameras.
	Each user can have a personal play list, but system play lists are
	available to all users.
	Selecting a play list on a monitor will cause the play list to
	automatically switch.
	The interval is specified by <a href="#sys_attr"><code>
	camera_sequence_dwell_sec</code></a>.
</p>

<h3 id="ramp_meters">Ramp Meters</h3>
<aside>
	Select <span class="menu">View ➔ Ramp Meters</span> menu item
</aside>
<p>
	A ramp meter is a traffic signal at an on-ramp which controls the rate
	of vehicles entering a freeway.
	Typically, one vehicle is permitted to enter for each green indication
	displayed on the signal.
</p>
<p>
	The following operations can be performed on a ramp meter:
</p>
<ul>
	<li>Activating and deactivating meter</li>
	<li>Adjusting meter release rate</li>
	<li>Querying meter status</li>
	<li>Querying green counts</li>
	<li>Synchronizing clock</li>
	<li>Configuring time-of-day operation</li>
</ul>
<p>
	Each ramp meter can be assigned to a <a href="#metering_strategies">
	metering strategy</a>, or <b>algorithm</b>.
</p>

<h3 id="gate_arms">Gate Arms</h3>
<aside>
	Select <span class="menu">View ➔ Gate Arm Arrays</span> menu item
</aside>
<p>
	Gate arms are traffic control devices which restrict access to a
	section of roadway.
	They can be used, for example, for reversible lanes which can be changed
	by time of day.
</p>
<p>
	Gate arms are controlled as arrays of 1-8 gate arms.
	Opening or closing an array will control all gate arms in the array.
</p>
<h4>Verification Cameras</h4>
<p>
	One or two <a href="#cameras">cameras</a> can be associated with a gate
	arm array, the second one for approaching traffic.
	This allows operators to verify the status and check traffic conditions
	before opening or closing a gate arm array.
	The <b>Swap</b> button allows the camera images to be swapped between
	larger and smaller views.
</p>
<h4>Warning Action Plan</h4>
<p>
	An <a href="#action_plan">action plan</a> can be associated with a gate
	arm array, allowing one or more <a href="#dms">DMS</a> to display
	appropriate warning messages.
	Whenever the state changes, this plan will immediately be changed to
	the appropriate <a href="#plan_phase">phase</a> &mdash;
	<b>Warning Open Phase</b> when fully open, otherwise <b>Warning Closed
	Phase</b>.
</p>
<h4 id="interlocks">Interlocks</h4>
<p>
	Great care must be taken to prevent traffic conflicts when using gate
	arms.
	Two types of <em>interlock</em> are available for this purpose.
	An <em>open interlock</em> is a constraint which prevents the gate arm
	from being opened within IRIS.
	Similarly, a <em>close interlock</em> prevents the gate arm from being
	closed.
</p>
<p>
	When a gate arm is open, all other gate arms on the same roadway, but in
	any other direction will have an <em>open interlock</em>.
</p>
</p>
	Each gate arm can be assigned a <em>prerequisite</em> gate arm (on the
	same roadway and direction).
	This configuration prevents the gate arm from opening until the
	prerequisite has been opened, using an <em>open interlock</em>.
	Once a gate arm and its prerequisite are both open, the prerequisite
	gate arm will have a <em>close interlock</em> until the other gate arm
	is closed.
</p>
<p>
	If communication is lost to a gate arm, the state will be unknown by
	IRIS.
	After <a href="#sys_attr"><code>gate_arm_alert_timeout_secs</code></a>
	(default 90), it will be treated as <em>possibly open</em>, causing
	interlocks to be checked.
	Also, an email will be sent to the address in
	<a href="#sys_attr"><code>email_recipient_gate_arm</code></a>.
</p>
<h4 id="gate_conflict">Conflicts</h4>
<p>
	If a <em>conflict</em> is detected, an <em>alert</em> email will be sent
	to the address in the <a href="#sys_attr"><code>email_recipient_gate_arm
	</code></a>.
	An <em>open conflict</em> exists when an <em>open interlock</em>
	constraint is broken.
	Similarly, a <em>close conflict</em> exists for <em>close interlock</em>
	constraints.
	IRIS will not automatically try to resolve conflicts.
</p>
<h4 id="gate_security">Gate Arm Security</h4>
<p>
	There are a couple of extra security features to restrict access to
	gate arm control.
	There is a whitelist of IP addresses from which IRIS clients are allowed
	to control gate arms.
	It is specified as a property in the
	<code>/etc/iris/iris-server.properties</code> configuration file.
	The property is <code>gate.arm.whitelist</code>, and it contains a list
	of addresses in CIDR notation (exact IP, or ranges specified such as
	192.168.1.0/24).
</p>
<p>
	Another gate arm security feature causes the entire "gate arm system"
	to be disabled whenever any configuration change is made to a gate arm.
	This includes any changes to a gate arm array, <a href="#controllers">
	controller</a> or associated <a href="#comm_links">comm link</a>.
	IRIS will not send any command to open or close any gate arm in this
	state.
	The only way to re-enable gate arm control is to create a file at
	<code>/var/lib/iris/gate_arm_enable</code> (using touch).
</p>

<h3 id="tag_readers">Tag Readers</h3>
<aside>
	Select <span class="menu">View ➔ Lane Use ➔ Tag Readers</span> menu item
</aside>
<p>
	A tag reader is a sensor for in-vehicle transponders (tags).
	When a tag is read, an event is logged in the database.
	The event includes the date and time, tag ID, toll zone and tollway.
	This information can be used for <a href="tolling.html">tolling</a>
	operation.
</p>

<h3 id="beacons">Beacons</h3>
<aside>
	Select <span class="menu">View ➔ Message Signs ➔ Beacons</span> menu
	item
</aside>
<p>
	A beacon is a light or set of lights that flashes toward oncoming
	traffic.
	Its purpose is to draw attention to a <a href="#dms">DMS</a> or static
	sign.
	Sometimes, they are called <b>flashers</b> or <b>wig-wags</b>.
	Internal and external beacons are supported.
	Internal beacons are controlled through the DMS controller, are
	activated through the <a href="#ntcip">NTCIP</a> DMS protocol and are
	considered part of the DMS.
	External beacons use dedicated controllers and protocols (e.g.
	<a href="#mndot170">MnDOT-170</a>).
</p>

<h3 id="alarms">Alarms</h3>
<aside>
	Select <span class="menu">View ➔ Maintenance ➔ Alarms</span> menu item
</aside>
<p>
	An alarm is a simple device triggered by an event.
	The event might be an equipment failure, high temperature, or low
	voltage in a field controller.
	Alarms can be monitored to help maintain field devices.
	Device drivers trigger alarms based on field controller states,
	information read from controllers (e.g. voltages), etc.
	Users can view the status of alarms on the Alarm Form. The Status
	Column indicates the state of each alarm, which can be Clear or
	Triggered.
	Alarms are created using the Alarm Form and can only be created for
	controllers using a protocol that generates alarms, such as
	<a href="#mndot170">MnDOT-170</a>.
</p>

<h3 id="rwis">Road Weather Information Systems</h3>
<aside>
	Select <span class="menu">View ➔ Weather Sensors</span> menu item
</aside>
<p>
	Road Weather Information Systems (RWIS) can sense data such as
	precipitation rate, road surface temperature, wind speed, etc.
</p>

<h3 id="gps">GPS</h3>
<p>
	A portable <a href="#dms">DMS</a> can have an associated GPS (global
	positioning system) receiver.
	This allows the sign to be tracked and automatically updated with the
	nearest roadway and direction.
</p>
<p>
	To create a GPS device, select the DMS and open its
	<code>Properties</code> form.
	On the <code>Location</code> tab, there are controls for configuring
	the associated GPS.
	Once the GPS is enabled, it must be associated with a controller.
	Its name will be the same as the DMS, with "_gps" appended.
	For <a href="#ntcip">NTCIP</a>, the GPS should be associated with the
	same controller as the DMS (using pin 2).
	For <a href="#redlion">RedLion</a> or <a href="#sierragx">SierraGX</a>,
	a new comm link and controller must be created to communicate with the
	modem.
</p>
<p>
	The GPS will be polled once every 5 minutes, unless on a
	<code>Modem</code> comm link.
	In that case, the comm link period will be used.
	The <code>Query GPS</code> button can be used to manually poll the
	coördinates.
</p>

<h2 id="features">Features</h2>

<h3 id="traffic_layer">Traffic Map Layer</h3>
<p>
	The IRIS client user interface includes a traffic map layer which is
	created automatically from the <a href="#road_topology">road
	topology</a>.
	By default, this layer uses traffic <b>density</b> to determine the
	color of each <b>segment</b>.
	Other themes are available for <b>speed</b> and <b>flow</b>.
	The <b>Legend</b> menu at the top of the map can be used to view
	the thresholds used for each color in a theme.
</p>
<p>
	Every 30 seconds, the client will make an HTTP request for the current
	traffic sample data XML file.
	The URL to locate that file is declared as a property in the
	<code>/etc/iris/iris-client.properties</code> file (on the IRIS server).
	The property is <code>tdxml.detector.url</code>, and it should point to
	the location of <a href="#vds_archiving">det_sample.xml.gz</a>, as made
	available by apache on the IRIS server.
</p>
<p>
	The appearance of the traffic map layer changes depending on the current
	map zoom level.
	If the zoom level is below 10, the layer will not be visible.
	At zoom levels 10 through 13, the layer will display segments as
	aggregate of all detectors in each mainline
	<a href="#station">station</a>.
	At zoom level 14 or above, each mainline <a href="#vds">detector</a>
	will be displayed as a separate segment.
</p>
<p>
	The maximum distance between adjacent <a href="#station">stations</a> to
	draw segments on the map is specified by <a href="#sys_attr"><code>
	map_segment_max_meters</code></a>.
	It is also the maximum downstream distance for associating station data
	with a segment.
</ol>

<h3 id="incident">Incident Management</h3>
<p>
	The <b>Incident</b> tab on the client interface is used to manage
	incidents within IRIS.
	Traffic incidents have several attributes, including location, type,
	detail, camera and lane impact.
	Active incidents are written to an
	<a href="troubleshooting.html#xml-output">XML file</a>,
	which can be processed by external systems.
</p>
<h4>Creating an Incident</h4>
<p>
	The user interface for creating incidents is streamlined to allow
	operators to process them quickly.
	First, click one of the incident type buttons: <b>Crash</b>,
	<b>Stall</b>, <b>Road Work</b> or <b>Hazard</b>.
	Then, the lane type can be selected &mdash; <i>Mainline</i> is the
	default, but <i>Exit</i>, <i>Entrance</i> and <i>CD Road</i> are
	available.
	Now, the incident location must be selected on the map (the mouse cursor
	will change to a crosshair).
	After that the incident detail, verification camera and lane impact
	can be selected (if required).
	The camera list will be populated with a few cameras near the location
	selected.
	The lane impact is represented by boxes for each lane at the incident
	location, including both shoulders.
	Each lane can be marked clear (default), blocked (red) or affected
	(yellow) by clicking on the box.
	Once the attributes have been set, press the <b>Log</b> button to create
	the incident.
	A triangular icon will appear on the map pointing in the direction of
	travel, color-coded with the incident type.
</p>
<h4>Editing an Incident</h4>
<p>
	To change the location or verification camera, the <b>Edit</b> button
	must be pressed first.
	To change the lane impact or to clear the incident, the <b>Edit</b>
	button is not required.
	After making changes, be sure to press the <b>Log</b> button again.
	Once an incident has been cleared, it will be removed from the list
	after 5 minutes.
	This allows a cleared incident to be reactivated if necessary.
</p>
<h4>Deploying Devices</h4>
<p>
	Devices can be deployed based on the incident impact by pressing the
	<b>Deploy</b> button.
	This will bring up a form with a list of suggested devices to deploy for
	the incident.
	The list may include <a href="#lcs">Lane-use control signals</a> or
	<a href="#dms">Dynamic Message Signs</a>.
	All DMS within the range of the incident are checked.
	Each of these DMS will be deployed if matching
	<a href="#inc_descriptor">descriptor</a>, <a href="#inc_locator">locator
	</a> and <a href="#inc_advice">advice</a> are found.
</p>
<h5 id="inc_descriptor">Incident Descriptor</h5>
<aside>
	Select <span class="menu">View ➔ Incident ➔ Incident Descriptor</span>
	menu item
</aside>
<p>
	An incident matches a descriptor only if all the attributes match.
	Each matching descriptor will be checked to see if the
	<a href="#multi">MULTI</a> string can be rendered on the DMS.
	If the MULTI string is too wide for the sign, the <b>abbrev</b> MULTI
	string is used instead.
</p>
<dl>
	<dt>Event Type</dt>
	<dd>CRASH, STALL, ROAD WORD, HAZARD</dd>
	<dt>Lane Type</dt>
	<dd>mainline, exit, merge, CD lane</dd>
	<dt>Detail</dt>
	<dd>animal, debris, ice, etc.</dd>
	<dt>Cleared Flag</dt>
	<dd>yes / no</dd>
</dl>
<h5 id="inc_locator">Incident Locator</h5>
<aside>
	Select <span class="menu">View ➔ Incident ➔ Incident Locator</span> menu
	item
</aside>
<p>
	The incident is associated with the nearest <em>pickable</em>
	<a href="#r_node">r_node</a>.
	If the distance to that node is less than 1 mile, it can be used as a
	<em>locator</em>.
	If not, the nearest <em>non-pickable</em> r_node is found.
	It can be used if distance is less than 1 mile.
</p>
<p>
	An incident matches a locator only if all the attributes match.
	Each matching locator will be checked to see if the
	<a href="#multi">MULTI</a> string (or abbrev) can be rendered on the
	DMS.
</p>
<dl>
	<dt>Range</dt>
	<dd>near (up to 1.5 mi), middle (1.5 to 5 mi), far (5 to 10 mi)</dd>
	<dt>Branched</dt>
	<dd>no / yes</dd>
	<dt>Pickable</dt>
	<dd>no / yes</dd>
</dl>
<p>
	One "<a href="#multi">MULTI</a>-like" tag is defined for incident
	locators.
</p>
<table>
	<tr>
		<th>Tag Value</th>
		<th>Description</th>
	</tr>
	<tr>
		<td>[locrn]</td>
		<td>Road name</td>
	</tr>
	<tr>
		<td>[locrd]</td>
		<td>Road direction</td>
	</tr>
	<tr>
		<td>[locmd]</td>
		<td>Location modifier (AT, N OF, S OF, etc.)</td>
	</tr>
	<tr>
		<td>[locxn]</td>
		<td>Cross-street name</td>
	</tr>
	<tr>
		<td>[locxa]</td>
		<td>Cross-street abbreviation</td>
	</tr>
	<tr>
		<td>[locmi]</td>
		<td>Miles from DMS to node</td>
	</tr>
</table>
<p>
	Road names are converted to all capital letters.
	For the `[locrn]` and `[locxn]` tags, certain prefixes and suffixes are
	replaced with other values.
	For the `[locxa]` tag, all matching prefixes and suffixes are stripped.
</p>
<h5 id="inc_advice">Incident Advice</h5>
<aside>
	Select <span class="menu">View ➔ Incident ➔ Incident Advice</span> menu
	item
</aside>
<p>
	An incident matches an advice record only if all attributes match.
</p>
<dl>
	<dt>Range</dt>
	<dd>near (up to 1.5 mi), middle (1.5 to 5 mi), far (5 to 10 mi)</dd>
	<dt>Lane Type</dt>
	<dd>mainline, exit, merge, CD lane</dd>
	<dt>Impact</dt>
	<dd>Lane impact code</dd>
	<dt>Cleared Flag</dt>
	<dd>yes / no</dd>
</dl>
<p>
	A lane impact code is defined for all lanes plus both shoulders.
	So, for a two-lane r_node, the impact code would be 4 characters.
</p>
<table>
	<tr>
		<th>Code</th>
		<th>Description</th>
	</tr>
	<tr>
		<td>.</td>
		<td>Not blocked</td>
	</tr>
	<tr>
		<td>?</td>
		<td>Affected</td>
	</tr>
	<tr>
		<td>!</td>
		<td>Fully blocked</td>
	</tr>
	<tr>
		<td>:</td>
		<td>Affected or blocked (? or !)</td>
	</tr>
	<tr>
		<td>;</td>
		<td>Not blocked (. or ?)</td>
	</tr>
	<tr>
		<td>,</td>
		<td>Any (. ? or !)</td>
	</tr>
</table>
<br/>

<h3 id="plan_schedule">Plans and Schedules</h3>
<aside>
	Select <span class="menu">View ➔ Plans and Schedules</span> menu item
</aside>
<h4 id="action_plan">Action Plans</h4>
<p>
	Action plans provide a way to coördinate multiple related actions
	at the same time.
	Each action plan has a <a href="#plan_phase">phase</a>, which can be
	changed at any time.
	Each phase can be associated with any number of <a href="#dms_action">
	DMS</a>, <a href="#beacon_action">beacon</a> or <a href="#meter_action">
	ramp meter</a> actions.
	More advanced plans can have many phases, each with separate actions.
	If the <b>Sync Actions</b> box is checked, the phase can only be changed
	if all associated devices are online.
	If the <b>Sticky</b> box is checked, messages sent with DMS actions will
	be configured to persist even if communication or power is lost.
</p>
<h4 id="day_plan">Day Plans</h4>
<p>
	A day plan is a set of days which can be used for scheduling.
	Day plans are specified with a table of <b>day matchers</b>.
	The matchers for a day plan determine whether a specific day is
	included in the plan or not.
	Day matchers flagged as <b>holidays</b> are excluded from a day plan.
	Day matchers are specified by <b>Month</b>, <b>Day</b>, <b>Week</b> and
	<b>Weekday</b>.
	Any day which matches <b>all</b> specified fields will match.
	<b>Shift</b> is only required for days like Black Friday (Fourth
	Thursday of November <b>+1</b>).
</p>
<h4 id="plan_phase">Plan Phases</h4>
<p>
	The basic phases of an action plan are <b>deployed</b> and
	<b>undeployed</b>.
	Additional phases can be added on the <b>Plan Phases</b> tab.
	Each phase must have a unique name.
	A transient phase can automatically advance to the <b>Next Phase</b>
	after a specified <b>Hold Time</b>.
	Currently, this must be a multiple of 30 seconds.
</p>
<h4 id="schedule">Schedules</h4>
<p>
	An action plan schedule can automatically change the phase at specified
	dates and times.
	These events can be scheduled using either a <a href="#day_plan">day
	plan</a> or a specific date (but not both).
	A time of day must also be specified (HH:MM in 24-hour format).
	Whenever the scheduled time occurs, the action plan will be changed to
	the specified phase.
</p>
<h4 id="dms_action">DMS Actions</h4>
<p>
	<a href="#dms">DMS</a> actions have an associated sign group to
	determine which signs are affected by the action.
	The action happens when the action plan phase matches the <b>phase</b>
	of the DMS action.
	The <a href="#quick_msg">quick message</a> indicates which message is
	activated by the plan.
	<b>Message priority</b> determines the priority of messages created
	by the action.
</p>
<h4 id="action_tag">DMS Action Tags</h4>
<p>
	Some "<a href="#multi">MULTI</a>-like" tags are supported in
	<a href="#quick_msg">quick messages</a> used by DMS actions.
	These tags are interpreted by IRIS before sending the message to the
	DMS.
</p>
<table>
	<tr>
	    <th>Tag</th>
	    <th>Description</th>
	</tr>
	<tr>
	    <td>[feed<i>n</i>]</td>
	    <td><a href="#msg_feed">Msg-Feed</a></td>
	</tr>
	<tr>
	    <td>[pa<i>i</i>,<i>l</i>,<i>c</i>]</td>
	    <td><a href="parking_areas.html">Parking area availability</a></td>
	</tr>
	<tr>
	    <td>[slow<i>s</i>,<i>d</i>,<i>mode</i>]</td>
	    <td><a href="slow_warning.html">Slow traffic warning</a></td>
	</tr>
	<tr>
	    <td>[tt<i>s</i>,<i>m</i>,<i>t</i>]</td>
	    <td><a href="#travel_time">Travel time</a></td>
	</tr>
	<tr>
	    <td>[tz<i>{p,o,c}</i>,<i>{tz0},</i>…<i>{tzn}</i>]</td>
	    <td><a href="tolling.html">Toll Zone</a></td>
	</tr>
	<tr>
	    <td>[vsa]</td>
	    <td><a href="vsa.html">Speed advisory</a></td>
	</tr>
</table>
<br/>
<h4 id="beacon_action">Beacon Actions</h4>
<p>
	A <a href="#beacons">beacon</a> action can cause a beacon to be deployed
	when the action plan is set to the specified <b>phase</b>.
	When the plan is set to any other phase, the beacon will shut off.
</p>
<h4 id="meter_action">Meter Actions</h4>
<p>
	A <a href="#ramp_meters">meter</a> action can cause a ramp meter to
	begin metering at the specified <b>phase</b>.
	When the plan is set to any other phase, the meter will shut off.
</p>

<h3 id="metering_strategies">Ramp Metering Strategies</h3>
<p>
	There are currently two metering strategies available in IRIS &mdash;
	<b>simple</b> and <b>density adaptive</b>.
</p>
<p>
	Simple metering runs the ramp meter at a fixed release rate.
	This rate is the target rate for the period (AM or PM).
</p>
<p>
	Density adaptive metering is a sophisticated algorithm with queue
	management.
	See <a href="density_metering.html">here</a> for details.
</p>

<h3 id="travel_time">Travel Time Estimation</h3>
<p>
	The current <b>travel time</b> from a <a href="#dms">DMS</a> to a
	downstream <a href="#station">station</a> can be estimated and displayed
	on the sign.
	A new estimate is made every 30 seconds, based on speed data from
	<a href="#vds">vehicle detection systems</a>.
</p>
<p>
	A <b>tt</b> <a href="#action_tag">action tag</a> can be used to specify
	a travel time within a <a href="#quick_msg">quick message</a>.
	When the message is deployed, the tag will be replaced by the estimated
	travel time, in minutes.
	The tag has three parameters, separated by commas.
</p>
<ol>
	<li>Destination <a href="#station_id">station ID</a></li>
	<li><a href="#travel_time_limit">Over limit</a> mode (<b>prepend</b> if
	    omitted)
	    <ul>
	        <li><b>blank</b>: do not display travel time when over limit</li>
	        <li><b>prepend</b>: prepend over limit text before travel
	            time</li>
	        <li><b>append</b>: append over limit text after travel time</li>
	    </ul>
	</li>
	<li>Over limit text ("OVER " if omitted)</li>
</ol>
<aside>
	NOTE: multiple destinations can be included on the same message by
	specifying multiple <b>[tt…]</b> tags.
</aside>
<p>
	Examples:
</p>
<ul>
	<li>FREEWAY TIME TO[nl][jl2]I-94[jl4]<b>[ttS100,prepend,OVER ]</b> MIN
	</li>
	<li>TIME TO[nl][jl2]I-35W[jl4]<b>[ttS200,append,+]</b> MIN</li>
	<li>DOWNTN[nl]<b>[ttS300,blank]</b> MIN</li>
</ul>
<h4>Route Pathfinding</h4>
<p>
	This feature requires that the <a href="#road_topology">road topology
	</a> is configured for the entire route.
	Using this topology, the shortest route is found from the DMS to the
	destination <a href="#station">station</a>.
	A route consists of one or more <b>corridor trips</b>.
	Each corridor trip has an <b>origin</b> and a <b>destination</b>, which
	are r_nodes associated with a single freeway corridor.
	For the first corridor trip, the origin is the DMS location.
	A route can only branch if an r_node with <b>exit</b>
	<a href="#r_node_type">node type</a> is matched with an <b>entrance</b>
	r_node.
	In order to match, the <b>roadway / direction</b> for the exit r_node
	must equal the <b>cross street / direction</b> for the entrance, and
	vice versa.
</p>
<p>
	Two <a href="#sys_attr">system attributes</a> control route pathfinding:
</p>
<dl>
	<dt>route_max_legs</dt>
	<dd>Maximum number of corridors to branch</dd>
	<dt>route_max_miles</dt>
	<dd>Maximum total route distance</dd>
</dl>
<h4>Speed Smoothing</h4>
<p>
	To deal with sampling problems at low speeds, a <b>smoothing</b>
	procedure is used.
	For each <a href="#station">station</a>, <b>running average</b> and
	<b>running minimum</b>
	speeds are calculated from all valid detectors in the station.
	If a speed higher than the <a href="#speed_limit">speed limit</a> is
	recorded, the speed limit is used instead.
	The sample interval used increases as the speed becomes lower:
</p>
<ul>
    <li>Normally 2 minutes</li>
    <li>Extend to 3 minutes if &lt; 25 mph</li>
    <li>Extend to 4 minutes if &lt; 20 mph</li>
    <li>Extend to 5 minutes if &lt; 15 mph</li>
</ul>
<h4>Route Travel Time</h4>
<p>
	The distance between each consecutive valid station is divided into 3
	<b>links</b> of equal length.
	If any link is longer than 0.6 miles, a travel time estimate would not
	be reliable, so the process is aborted.
	The links which are adjacent to a station are assigned speed from that
	station.
	"Middle" links are assigned an average of the immediate upstream and
	downstream station speeds.
	Normally, the running average speed is used.
	If the link is less than 1 mile from the corridor destination, the
	running minimum is used instead.
	Travel time for each link is estimated by dividing its length by the
	assigned speed.
	If the route branches, each branch adds a 1 minute <b>turning delay</b>.
</p>
<h4 id="travel_time_limit">Travel Time Limit</h4>
<p>
	To prevent unreasonable messages from being displayed due to data
	errors, a limit is calculated.
	The total route length is divided by <a href="#sys_attr"><code>
	travel_time_min_mph</code></a> (default 15).
	The result, rounded up the to next 5 minutes, is the <b>travel time
	limit</b>.
</p>
<p>
	If the calculated travel time is over the travel time limit, the
	message will be <b>over limit</b>.
	If the over limit mode is <b>blank</b>, no message will be shown.
	Otherwise, the tag will be replaced with the travel time limit, with
	the over limit text either prepended or appended.
</p>

</main>

</body>
</html>
